import{B as t}from"./Base.16bb57ee.js";import{Y as a}from"./YearSelect.e1069a84.js";import{_ as e,A as r}from"./ChartJsMixin.917862c1.js";import{S as l}from"./SymfonyReportsRoutes.a4d69e79.js";import{_ as s,r as i,o,Y as n,k as h,f as c,t as d,e as p,h as f,g as u}from"./index.5c1c3a9f.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.ff32a711.js";const m={class:"text-2xl mb-1"},g={key:0,class:"flex flex-col justify-end"},b={class:"text-lg text-center md:text-right pr-0 md:pr-6 mb-1"},v={class:"w-full flex justify-end"},x={class:"w-full md:w-1/2 lg:w-1/3 xl:w-1/6 md:mr-2"},y={class:"chart-wrapper lg:p-10 xl:p-20 flex justify-end flex-col"},w={ref:"chartWrapper",height:"100%",style:{"max-height":"400px"}},Y={class:"text-lg"};var B=s({data:()=>({yearFilter:null,allYears:[],chartData:[]}),mixins:[e],components:{YearSelect:a,Actions:r,Base:t},computed:{avgSaving(){if(0===this.values.length)return 0;let t=0;for(let a of this.values)t+=a;return(t/this.values.length).toFixed(2)},labels(){let t=this.chartData.map((t=>t.label));if(!this.yearFilter)return t;let a=[];for(let e of t)e.match(/[0-9]{4}/)[0]==this.yearFilter&&a.push(e);return a},values(){if(!this.yearFilter)return this.chartData.map((t=>t.value));let t=[];for(let a of this.chartData)a.label.match(/[0-9]{4}/)[0]==this.yearFilter&&t.push(a.value);return t},chartConfig(){let t="rgba(5, 150, 105, 0.3)";return{type:"line",data:{labels:this.labels,datasets:[{borderColor:"rgb(59, 130, 246)",fill:!1,label:this.$t("reports.saving.eachMonth.chart.tooltip.label"),data:this.values}]},options:{scales:{x:{title:{display:!0,text:this.$t("reports.saving.eachMonth.chart.scale.x.label"),font:{weight:"bold"}}},y:{title:{display:!0,text:this.$t("reports.saving.eachMonth.chart.scale.y.label"),font:{weight:"bold"}}}},responsive:!0,maintainAspectRatio:!1,plugins:{crosshair:{sync:{enabled:!1},line:{color:t,width:1},zoom:{enabled:!0,zoomboxBackgroundColor:t,zoomboxBorderColor:t,zoomButtonClass:"chart-reset-zoom",zoomButtonText:this.$t("generic.chart.resetButton.label")}},datalabels:{backgroundColor:function(t){return t.dataset.borderColor},borderRadius:4,color:"white",font:{weight:"bold"},formatter:Math.round,padding:4},title:{display:!1},tooltip:{animation:!1,intersect:!1,callbacks:{label:function(t){return t.chart.data.datasets[t.datasetIndex].label+": "+t.raw}}},legend:{display:!1}}}}}},methods:{applyYearFilter(t){this.yearFilter=t,this.refreshChart(this.chartConfig,this.$refs.chartWrapper)},buildYears(){for(let t of this.labels)this.allYears.push(t.match(/[0-9]{4}/)[0]);this.allYears=[...new Set(this.allYears)]}},async mounted(){this.chartData=await this.$moduleCall.getAll(l.SAVINGS_BASE_URL),this.buildYears(),this.createChart(this.chartConfig,this.$refs.chartWrapper)}},[["render",function(t,a,e,r,l,s){const B=i("YearSelect"),C=i("Actions"),S=i("Base");return o(),n(S,{"info-block-description":t.$t("reports.saving.eachMonth.description"),"is-in-container":!0,cla:""},{default:h((()=>[c("div",null,[c("h2",m,d(t.$t("reports.saving.eachMonth.chart.header")),1),this.allYears.length>0?(o(),p("div",g,[c("div",null,[c("h2",b,d(t.$t("reports.saving.eachMonth.chart.filter.filterByYear.header")),1)]),c("div",v,[c("div",x,[f(B,{years:l.allYears,"allow-all-option":!0,"onUpdate:modelValue":a[0]||(a[0]=t=>s.applyYearFilter(t))},null,8,["years"])])])])):u("",!0)]),c("div",y,[f(C,{"chart-instance":t.chartInstance},null,8,["chart-instance"]),c("canvas",w,null,512),c("h2",Y,d(t.$t("reports.saving.eachMonth.chart.text.averageSavingMonth.label"))+": "+d(s.avgSaving),1)])])),_:1},8,["info-block-description"])}]]);export{B as default};
