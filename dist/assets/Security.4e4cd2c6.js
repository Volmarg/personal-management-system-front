import{_ as s,Q as o,M as i,a0 as e,S as a,T as t,r as n,o as r,e as d,h as l,k as c,ab as u}from"./index.5c1c3a9f.js";import{P as h}from"./PasswordWithConfirmation.5aa9eabe.js";import{_ as w}from"./DemoAwareMixin.69cc6fe9.js";import{S as m,_ as C,R as f}from"./ResponsiveViewNavMixin.dfc07434.js";import"./VuelidateHandler.ffbf1da4.js";import"./index.esm.6a4d3e5b.js";var g=s({data:()=>({rawPassword:null,rawConfirmPassword:null}),props:{id:{type:String,required:!1,default:""},isVisible:{type:Boolean,required:!0},isLockPassword:{type:Boolean,required:!1,default:!1}},emits:["modalClosed"],mixins:[o,w],components:{PasswordWithConfirmation:h,MediumButtonWithIcon:i,Modal:e},computed:{translationGroup(){return this.isLockPassword?"changeLockPassword":"changePassword"}},methods:{onPasswordChanged(s){this.rawPassword=s,this.rawConfirmPassword=s},onConfirmPasswordChanged(s){this.rawConfirmPassword=s},validateForm(){return this.$refs.passwordWithConfirmation.validateInput()},save(){if(this.isDemo||!this.validateForm())return;let s=this.isLockPassword?m.URL_CHANGE_LOCK_PASSWORD:m.URL_CHANGE_PASSWORD,o=a.buildUrl(s),i={password:this.rawPassword,passwordConfirmed:this.rawConfirmPassword};this.$rootEvent.showFullPageLoader(),this.$axios.post(o,i).then((s=>{if(this.$rootEvent.hideFullPageLoader(),s.isMessageSet()){let o=s.success?t.success:t.error;this.$rootEvent.showNotification(o,s.message)}}))}}},[["render",function(s,o,i,e,a,t){const u=n("PasswordWithConfirmation"),h=n("MediumButtonWithIcon"),w=n("Modal",!0);return r(),d("div",null,[l(w,{title:s.$t(`userSettings.tab.security.children.${t.translationGroup}.dialog.header`),"is-visible":i.isVisible,"is-close-full-width":!0,onModalClosed:o[0]||(o[0]=o=>s.$emit("modalClosed")),size:s.isPhoneBreakingPoint?"full":"medium"},{content:c((()=>[l(u,{onBothPasswordsChanged:t.onPasswordChanged,onPasswordChanged:t.onPasswordChanged,onConfirmPasswordChanged:t.onConfirmPasswordChanged,ref:"passwordWithConfirmation",class:"mb-6"},null,8,["onBothPasswordsChanged","onPasswordChanged","onConfirmPasswordChanged"])])),footerRightSection:c((()=>[l(h,{"background-color-class":"bg-blue-500",text:s.$t(`userSettings.tab.security.children.${t.translationGroup}.form.submit.label`),disabled:s.isDemo,class:"w-full sm:w-auto m-0-force","button-classes":"w-full sm:w-auto","text-classes":"text-center w-full",onClick:t.save},null,8,["text","disabled","onClick"])])),_:1},8,["title","is-visible","size"])])}]]),P=s({mixins:[C],components:{ChangeLockPassword:s({data:()=>({isModalVisible:!1}),components:{ChangePasswordModal:g,MediumButtonWithIcon:i,la:u},methods:{showDialog(){this.isModalVisible=!0},onModalClosed(){this.isModalVisible=!1}}},[["render",function(s,o,i,e,a,t){const u=n("la"),h=n("MediumButtonWithIcon"),w=n("ChangePasswordModal");return r(),d("div",null,[l(h,{text:s.$t("userSettings.tab.security.children.changeLockPassword.label"),"is-icon-on-top":!0,onClick:t.showDialog,"button-classes":"user-settings-view-button"},{icon:c((()=>[l(u,{color:"white","svg-icon-name":"key-solid","font-size":"20"})])),_:1},8,["text","onClick"]),l(w,{"is-visible":a.isModalVisible,id:"password-lock","is-lock-password":!0,onModalClosed:t.onModalClosed},null,8,["is-visible","onModalClosed"])])}]]),ChangePassword:s({data:()=>({isModalVisible:!1}),components:{ChangePasswordModal:g,MediumButtonWithIcon:i,la:u},methods:{showDialog(){this.isModalVisible=!0},onModalClosed(){this.isModalVisible=!1}}},[["render",function(s,o,i,e,a,t){const u=n("la"),h=n("MediumButtonWithIcon"),w=n("ChangePasswordModal");return r(),d("div",null,[l(h,{text:s.$t("userSettings.tab.security.children.changePassword.label"),"is-icon-on-top":!0,onClick:t.showDialog,"button-classes":"user-settings-view-button"},{icon:c((()=>[l(u,{color:"white","svg-icon-name":"key-solid","font-size":"20"})])),_:1},8,["text","onClick"]),l(w,{"is-visible":a.isModalVisible,id:"password",onModalClosed:t.onModalClosed},null,8,["is-visible","onModalClosed"])])}]]),Row:f}},[["render",function(s,o,i,e,a,t){const u=n("ChangePassword"),h=n("ChangeLockPassword"),w=n("Row");return r(),d("div",null,[l(w,{"is-content-equally-distributed":!0,"flex-direction":s.rowFlexDirection},{default:c((()=>[l(u),l(h)])),_:1},8,["flex-direction"])])}]]);export{P as default};
