import{B as e}from"./Base.ed256b75.js";import{_ as t,aS as a,r as o,o as l,Y as s,M as n,I as r,aW as i,B as m,e as u,f as d,t as p,h as b,aa as c,aY as h,k as y}from"./index.96856189.js";import{S as f}from"./SimpleTable.3c40fd1c.js";import{S as P}from"./SymfonyJobRoutes.6abc686e.js";import{T as S}from"./TableActions.a663c780.js";import{P as g}from"./PoolsState.c8c1244e.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.0bd7bab9.js";import"./SearchInput.1906b730.js";import"./ClipboardService.8ea6182d.js";var C=t({data(){return{targetFilter:null,targetSelectOptions:[],headers:[{label:"id",dataValuePath:"id.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("job.settings.tabs.managePool.table.headers.year.label"),dataValuePath:"year.value",dataIsComponentPath:"year.isComponent",dataComponentPropertiesPath:null},{label:this.$t("job.settings.tabs.managePool.table.headers.days.label"),dataValuePath:"days.value",dataIsComponentPath:"days.isComponent",dataComponentPropertiesPath:null},{label:this.$t("job.settings.tabs.managePool.table.headers.companyName.label"),dataValuePath:"companyName.value",dataIsComponentPath:"companyName.isComponent",dataComponentPropertiesPath:null},{label:this.$t("job.settings.tabs.managePool.table.headers.actions.label"),dataValuePath:"actions.value",dataIsComponentPath:"actions.isComponent",dataComponentPropertiesPath:"actions.componentProps"}]}},props:{tableData:{type:Array,required:!0}},components:{NoResultsText:a,SimpleTable:f}},[["render",function(e,t,a,n,r,i){const m=o("SimpleTable"),u=o("NoResultsText");return a.tableData.length>0?(l(),s(m,{key:0,headers:r.headers,data:a.tableData,ref:"table"},null,8,["headers","data"])):(l(),s(u,{key:1}))}]]);const N={class:"flex justify-center"},j={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},w={class:"text-lg mb-2"};var v=t({data:()=>({form:{year:null,days:null,companyName:null}}),props:{header:{type:String,required:!1,default:""},id:{type:[Number,null],required:!1,default:null},year:{type:[Number,null],required:!1,default:null},days:{type:[String,null],required:!1,default:null},companyName:{type:[String,null],required:!1,default:null}},components:{MediumButtonWithIcon:n,FormInput:r},methods:{clearForm(){this.form.year=null,this.form.days=null,this.form.companyName=null},async onSubmit(){let e,t=new i(P.SETTINGS_HOLIDAYS_POOL_BASE_URL,this.id,m,this.form);t.reload=!1,e=this.id?await this.$moduleCall.update(t):await this.$moduleCall.new(t),e.success&&(this.$emit("submit"),this.clearForm())}},beforeMount(){this.form.year=this.year,this.form.days=this.days,this.form.companyName=this.companyName}},[["render",function(e,t,a,s,n,r){const i=o("FormInput"),m=o("MediumButtonWithIcon");return l(),u("div",N,[d("div",j,[d("h2",w,p(a.header),1),b(i,{type:"number",modelValue:n.form.year,"onUpdate:modelValue":t[0]||(t[0]=e=>n.form.year=e),"is-required":!0,label:e.$t("job.settings.tabs.managePool.form.year.label")},null,8,["modelValue","label"]),b(i,{type:"number",modelValue:n.form.days,"onUpdate:modelValue":t[1]||(t[1]=e=>n.form.days=e),"is-required":!0,label:e.$t("job.settings.tabs.managePool.form.daysInPool.label")},null,8,["modelValue","label"]),b(i,{type:"text",modelValue:n.form.companyName,"onUpdate:modelValue":t[2]||(t[2]=e=>n.form.companyName=e),"is-required":!0,label:e.$t("job.settings.tabs.managePool.form.companyName.label")},null,8,["modelValue","label"]),b(m,{text:e.$t("job.settings.tabs.managePool.form.submit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-6","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:r.onSubmit},null,8,["text","onButtonClick"])])])}]]),I=t({data:()=>({poolsStore:null,pools:[]}),components:{AddEditForm:v,PoolsTable:C},computed:{tableData(){let e=[];for(let t of this.pools)e.push({values:{id:{value:t.id,isComponent:!1},year:{value:t.year,isComponent:!1},days:{value:t.days,isComponent:!1},companyName:{value:t.companyName,isComponent:!1},actions:{value:S,isComponent:!0,componentProps:{editActionForm:v,baseUrl:P.SETTINGS_HOLIDAYS_POOL_BASE_URL,store:g}}}});return e}},methods:{async getPools(){await this.poolsStore.getAll(),this.pools=this.poolsStore.allEntries},onNewSubmit(){this.getPools()}},beforeMount(){this.poolsStore=g(),this.getPools()},watch:{"poolsStore.allEntries":{deep:!0,handler:function(){this.pools=this.poolsStore.allEntries}}}},[["render",function(e,t,a,s,n,r){const i=o("PoolsTable"),m=o("AddEditForm");return l(),u(c,null,[b(i,{"table-data":r.tableData},null,8,["table-data"]),b(m,{header:e.$t("job.settings.tabs.managePool.header"),onSubmit:r.onNewSubmit},null,8,["header","onSubmit"])],64)}]]),T=t({components:{Tabs:h,Base:e},computed:{tabsContent(){return[{tabName:this.$t("job.settings.tabs.managePool.label"),tabComponent:I}]}}},[["render",function(e,t,a,n,r,i){const m=o("Tabs"),u=o("Base");return l(),s(u,{"info-block-description":e.$t("reports.historical.paymentsSummaries.description"),"is-in-container":!1},{default:y((()=>[b(m,{"tabs-with-content":i.tabsContent},null,8,["tabs-with-content"])])),_:1},8,["info-block-description"])}]]);export{T as default};
