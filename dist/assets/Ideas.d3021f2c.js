import{A as e,a as t,B as a}from"./Base.4cd7396b.js";import{_ as l,M as o,r as i,o as s,e as d,f as n,t as r,h as c,p as m,l as u,k as p,j as h,aa as b,af as f,Y as g,S as C,aE as v,aF as D,aK as y,I as M,aW as w,B as V,a0 as x,a1 as k,aN as S,aS as A,R as E,X as $}from"./index.31c62b28.js";import{F as B}from"./FloatingRoundedPlus.c31c80fc.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.d18aa733.js";import"./FloatingBox.129e8240.js";const R={props:{locationData:{type:Object,required:!0}},emits:["editClick","removeClick"],components:{MediumButtonWithIcon:o},methods:{onMapClick(){window.open(this.locationData.mapUrl,"_blank")}}},U={class:"max-w-xs bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700 m-2 card"},_={class:"image-wrapper"},I=["src"],L={class:"p-5"},F={class:"mb-2 text-2md font-bold tracking-tight text-gray-900 dark:text-white break-all"},j=(N=()=>n("hr",null,null,-1),m("data-v-cd6859e0"),N=N(),u(),N),q={class:"mb-2 break-all"},O=["href"];var N;const z={class:"w-full"},P={class:"mb-5 flex w-full flex-wrap justify-center"};var W=l({props:{ideaData:{type:Object,required:!0}},components:{Accordion:e,AccordionPanel:t,LocationCard:l(R,[["render",function(e,t,a,l,o,m){const u=i("MediumButtonWithIcon");return s(),d("div",U,[n("div",_,[n("img",{class:"image",src:a.locationData.imageUrl},null,8,I)]),n("div",L,[n("h5",F,r(a.locationData.country),1),j,n("p",q,r(a.locationData.location),1),n("a",{href:a.locationData.mapUrl,target:"_blank"},[c(u,{text:e.$t("travels.ideas.button.map.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1","button-classes":"w-full m-0-force","text-classes":"text-center w-full",onClick:m.onMapClick},null,8,["text","onClick"])],8,O),c(u,{text:e.$t("travels.ideas.button.edit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1","button-classes":"w-full m-0-force","text-classes":"text-center w-full",onButtonClick:t[0]||(t[0]=t=>e.$emit("editClick",{locationData:a.locationData}))},null,8,["text"]),c(u,{text:e.$t("travels.ideas.button.remove.label"),class:"w-full mb-1","button-classes":"w-full m-0-force","text-classes":"text-center w-full","background-color-class":"bg-red-500",onButtonClick:t[1]||(t[1]=t=>e.$emit("removeClick",{locationData:a.locationData}))},null,8,["text"])])])}],["__scopeId","data-v-cd6859e0"]])},emits:["editClick","removeClick"]},[["render",function(e,t,a,l,o,m){const u=i("LocationCard"),C=i("AccordionPanel"),v=i("Accordion");return s(),d("div",z,[c(v,null,{default:p((()=>[c(C,{class:"accordion-panel"},{title:p((()=>[h(r(a.ideaData.categoryName),1)])),content:p((()=>[n("div",P,[(s(!0),d(b,null,f(a.ideaData.locations,(a=>(s(),g(u,{key:JSON.stringify(a),"location-data":a,onEditClick:t[0]||(t[0]=t=>e.$emit("editClick",t)),onRemoveClick:t[1]||(t[1]=t=>e.$emit("removeClick",t))},null,8,["location-data"])))),128))])])),_:1})])),_:1})])}]]);class T extends C{}T.IDEAS_BASE_URL="/module/travels/ideas";const H=v("travelIdeasStore",{state:()=>({allEntries:[]}),actions:{async getAll(){this.allEntries=await(new D).getAll(T.IDEAS_BASE_URL)}}}),J={class:"flex justify-center"},K={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},X={data(){return{initialSmallSizeModal:"medium",showModal:!1,locationFormData:{...this.editedData}}},props:{editedData:{type:[null,Object],required:!1,default:function(){return{}}},header:{type:String,required:!0},isModalVisible:{type:Boolean,required:!0,default:!1}},components:{Modal:x,AddEditForm:l({data(){return{formData:{...this.locationData}}},props:{locationData:{type:Object,required:!0}},components:{CategorySelect:l({data(){return{store:null,ideas:[],selectOptions:[],selectedValue:this.modelValue}},props:{modelValue:{required:!1}},components:{MultiSelect:y},computed:{options(){let e=[],t=[];for(let a of this.ideas)e.push(a.category);e=[...new Set(e)];for(let a of e)t.push({label:a,value:a});return t}},methods:{onOptionChanged(e){this.selectedValue=e,this.$emit("update:modelValue",e)}},async beforeMount(){this.store=H(),await this.store.getAll(),this.ideas=this.store.allEntries,this.selectedValue=[this.modelValue]},watch:{modelValue(){this.selectedValue=[this.modelValue]}}},[["render",function(e,t,a,l,o,d){const n=i("MultiSelect");return s(),g(n,{label:e.$t("travels.ideas.form.category.label"),options:d.options,onChange:d.onOptionChanged,onSelect:d.onOptionChanged,onDeselect:d.onOptionChanged,onClear:d.onOptionChanged,onPaste:d.onOptionChanged,modelValue:o.selectedValue,"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedValue=e),"can-clear":!1,required:!0,mode:"tags","max-options":"1","allow-show-options-list":!0,"allow-create-options":!0},null,8,["label","options","onChange","onSelect","onDeselect","onClear","onPaste","modelValue"])}]]),MediumButtonWithIcon:o,FormInput:M},emits:["submit"],methods:{async onSubmit(){var e;let t=null;this.formData.category&&(t=this.formData.category[0]);let a,l={...this.formData,category:t},o=new w(T.IDEAS_BASE_URL,null!=(e=l.id)?e:null,V,l);o.reload=!1,a=l.id?await this.$moduleCall.update(o):await this.$moduleCall.new(o),a.success&&this.$emit("submit")}},beforeMount(){this.formData=this.locationData}},[["render",function(e,t,a,l,o,r){const m=i("FormInput"),u=i("CategorySelect"),p=i("MediumButtonWithIcon");return s(),d("div",J,[n("div",K,[c(m,{type:"text",modelValue:o.formData.location,"onUpdate:modelValue":t[0]||(t[0]=e=>o.formData.location=e),"is-required":!0,label:e.$t("travels.ideas.form.location.label")},null,8,["modelValue","label"]),c(m,{type:"text",modelValue:o.formData.country,"onUpdate:modelValue":t[1]||(t[1]=e=>o.formData.country=e),"is-required":!0,label:e.$t("travels.ideas.form.country.label")},null,8,["modelValue","label"]),c(m,{type:"text",modelValue:o.formData.imageUrl,"onUpdate:modelValue":t[2]||(t[2]=e=>o.formData.imageUrl=e),"is-required":!0,label:e.$t("travels.ideas.form.image.label")},null,8,["modelValue","label"]),c(m,{type:"text",modelValue:o.formData.mapUrl,"onUpdate:modelValue":t[3]||(t[3]=e=>o.formData.mapUrl=e),label:e.$t("travels.ideas.form.map.label")},null,8,["modelValue","label"]),c(u,{modelValue:o.formData.category,"onUpdate:modelValue":t[4]||(t[4]=e=>o.formData.category=e)},null,8,["modelValue"]),c(p,{text:e.$t("shopping.plans.form.submit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-6","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:r.onSubmit},null,8,["text","onButtonClick"])])])}]])},mixins:[k],emits:["modalClosed","formSubmitted"],methods:{onModalClosed(){this.$emit("modalClosed")}},updated(){this.showModal=this.isModalVisible},watch:{editedData(){this.locationFormData={...this.editedData}}}},Y={data:()=>({showModal:!1}),props:{id:{props:Number,required:!0},isModalVisible:{type:Boolean,required:!0,default:!1}},components:{WarningModal:S},mixins:[k],emits:["modalClosed","removeConfirmClick"],methods:{async onConfirm(){(await this.$moduleCall.remove(T.IDEAS_BASE_URL,this.id,!1)).success&&(this.$emit("modalClosed"),this.$emit("removeConfirmClick"))},onModalClosed(){this.$emit("modalClosed")}},updated(){this.showModal=this.isModalVisible}},G={key:0},Q={key:1};var Z=l({data:()=>({store:null,handledLocationData:null,ideas:[],isAddEditModalVisible:!1,isRemoveModalVisible:!1}),components:{Base:a,AddEditModal:l(X,[["render",function(e,t,a,l,o,n){const r=i("AddEditForm"),m=i("Modal");return s(),d("div",null,[c(m,{"is-visible":o.showModal,title:a.header,onModalClosed:n.onModalClosed,size:e.modalSize},{content:p((()=>[c(r,{"location-data":o.locationFormData,onSubmit:t[0]||(t[0]=e=>this.$emit("formSubmitted"))},null,8,["location-data"])])),_:1},8,["is-visible","title","onModalClosed","size"])])}]]),RemoveModal:l(Y,[["render",function(e,t,a,l,o,n){const m=i("WarningModal");return s(),d("div",null,[c(m,{"is-visible":o.showModal,title:e.$t("generic.action.remove.dialog.header"),onModalClosed:n.onModalClosed,onConfirm:n.onConfirm,size:e.modalSize},{content:p((()=>[h(r(e.$t("components.modal.text.removeRecord")),1)])),_:1},8,["is-visible","title","onModalClosed","onConfirm","size"])])}]]),SingleCategory:W,NoResultsText:A,FloatingRoundedPlus:B},computed:{addEditHeader(){return this.handledLocationData?this.$t("travels.ideas.form.header.edit"):this.$t("travels.ideas.form.header.add")},structuredIdeas(){let e=[],t=[];for(let a of this.ideas)t[a.category]||(t[a.category]={locations:[]}),t[a.category].locations.push({id:a.id,location:a.location,country:a.country,category:a.category,imageUrl:a.imageUrl,mapUrl:a.mapUrl});for(let a in t){let l=t[a];e.push({categoryName:a,locations:l.locations})}return e}},async beforeMount(){this.store=H(),await this.store.getAll(),this.ideas=this.store.allEntries},watch:{"store.allEntries":{deep:!0,handler:function(){this.ideas=this.store.allEntries}}}},[["render",function(e,t,a,l,o,n){var r,m;const u=i("SingleCategory"),h=i("NoResultsText"),C=i("Base"),v=i("AddEditModal"),D=i("RemoveModal"),y=i("FloatingRoundedPlus"),M=E("tippy");return s(),d(b,null,[c(C,{"info-block-description":e.$t("travels.ideas.description"),"is-in-container":!1},{default:p((()=>[n.structuredIdeas.length>0?(s(),d("div",G,[(s(!0),d(b,null,f(n.structuredIdeas,(e=>(s(),g(u,{key:e.categoryName,"idea-data":e,onEditClick:t[0]||(t[0]=e=>{o.isAddEditModalVisible=!0,o.handledLocationData=e.locationData}),onRemoveClick:t[1]||(t[1]=e=>{o.isRemoveModalVisible=!0,o.handledLocationData=e.locationData})},null,8,["idea-data"])))),128))])):(s(),d("div",Q,[c(h)]))])),_:1},8,["info-block-description"]),c(v,{"is-modal-visible":o.isAddEditModalVisible,"edited-data":o.handledLocationData,header:n.addEditHeader,onModalClosed:t[2]||(t[2]=e=>{o.isAddEditModalVisible=!1,o.handledLocationData=null}),onFormSubmitted:t[3]||(t[3]=e=>{o.isAddEditModalVisible=!1,o.handledLocationData=null,o.store.getAll()})},null,8,["is-modal-visible","edited-data","header"]),c(D,{"is-modal-visible":o.isRemoveModalVisible,id:null!=(m=null==(r=o.handledLocationData)?void 0:r.id)?m:null,onModalClosed:t[4]||(t[4]=e=>o.isRemoveModalVisible=!1),onRemoveConfirmClick:t[5]||(t[5]=e=>{o.isRemoveModalVisible=!1,o.handledLocationData=null,o.store.getAll()})},null,8,["is-modal-visible","id"]),$(c(y,{class:"mb-10",onClick:t[6]||(t[6]=e=>o.isAddEditModalVisible=!0)},null,512),[[M,e.$t("travels.ideas.button.addNew.hoverText")]])],64)}]]);export{Z as default};
