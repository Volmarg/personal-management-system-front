import{S as e,_ as t,aK as i,M as l,I as o,c as a,aW as s,B as n,r as d,o as r,e as m,f as c,t as u,h,a2 as p,n as v,a0 as f,a1 as b,k as C,Y as y,g as M,aN as g,j as w,aI as x,aa as S,af as V}from"./index.7d9fe974.js";import{B as E}from"./Base.ab092e87.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.336f836a.js";class k extends e{}k.ACHIEVEMENTS_BASE_URL="/module/achievements";const A={class:"flex justify-center"},$={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},B={class:"text-lg"};var R=t({data:()=>({form:{name:null,description:null,type:null}}),props:{header:{type:String,required:!1,default:""},id:{type:[Number,null],required:!1,default:null},type:{type:[String,null],required:!1,default:null},name:{type:[String,null],required:!1,default:null},description:{type:[Number,null],required:!1,default:null}},components:{MultiSelect:i,MediumButtonWithIcon:l,FormInput:o},computed:{typeOptions(){let e=[];const t=["simple","medium","hard","hardcore"];for(let i of t)e.push({value:i,label:a.ucFirst(i)});return e}},methods:{onTypeChanged(e){this.selected=e,this.$emit("update:modelValue",e),this.$emit("change",e)},clearForm(){this.form.name=null,this.form.description=null,this.form.type=null},async onSubmit(){let e,t=new s(k.ACHIEVEMENTS_BASE_URL,this.id,n,this.form);t.reload=!1,e=this.id?await this.$moduleCall.update(t):await this.$moduleCall.new(t),e.success&&(this.$emit("submit"),this.clearForm())}},beforeMount(){this.form.name=this.name,this.form.description=this.description,this.form.type=this.type}},[["render",function(e,t,i,l,o,a){const s=d("FormInput"),n=d("MultiSelect"),p=d("MediumButtonWithIcon");return r(),m("div",A,[c("div",$,[c("h2",B,u(i.header),1),h(s,{type:"text",modelValue:o.form.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.form.name=e),"is-required":!0,label:e.$t("achievements.list.form.name.label")},null,8,["modelValue","label"]),h(s,{type:"text",modelValue:o.form.description,"onUpdate:modelValue":t[1]||(t[1]=e=>o.form.description=e),label:e.$t("achievements.list.form.description.label")},null,8,["modelValue","label"]),h(n,{label:e.$t("achievements.list.form.type.label"),options:a.typeOptions,onChange:a.onTypeChanged,onSelect:a.onTypeChanged,onDeselect:a.onTypeChanged,onClear:a.onTypeChanged,onPaste:a.onTypeChanged,modelValue:o.form.type,"onUpdate:modelValue":t[2]||(t[2]=e=>o.form.type=e),mode:"single","allow-show-options-list":!0,"allow-create-options":!1,"can-clear":!0,required:!0,ref:"multiselect"},null,8,["label","options","onChange","onSelect","onDeselect","onClear","onPaste","modelValue"]),h(p,{text:e.$t("achievements.list.form.submitButton.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-6","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:a.onSubmit},null,8,["text","onButtonClick"])])])}]]);const _={class:"flex flex-col p-2 w-full"},q={class:"flex items-start justify-start mb-2"},D={class:"text-left"},I={class:"text-sm font-bold"},T={class:"text-xs text-gray-600"};var F=t({props:{name:{type:String,required:!0},description:{type:String,required:!0},type:{type:String,required:!0}},computed:{backgroundColorClass(){switch(this.type){case"simple":return"bg-green-200";case"medium":return"bg-yellow-200";case"hard":return"bg-red-200";case"hardcore":return"bg-gray-300";default:throw new p(`Unsupported type: ${this.type}`)}}}},[["render",function(e,t,i,l,o,a){return r(),m("div",{class:v(["m-2 hover-zoom",{[a.backgroundColorClass]:!0}])},[c("div",_,[c("div",q,[c("div",D,[c("div",I,u(i.name),1),c("div",T,u(i.description),1)])])])],2)}]]),z=t({data:()=>({initialSmallSizeModal:"medium",showModal:!1}),props:{isModalVisible:{type:Boolean,required:!0,default:!1},achievementData:{type:Object,required:!0}},components:{MediumButtonWithIcon:l,AddEditForm:R,Modal:f},mixins:[b],emits:["modalClosed","confirmClick","removeClick"],methods:{onModalClosed(){this.$emit("modalClosed")}},updated(){this.showModal=this.isModalVisible}},[["render",function(e,t,i,l,o,a){const s=d("AddEditForm"),n=d("MediumButtonWithIcon"),c=d("Modal");return r(),m("div",null,[h(c,{"is-visible":o.showModal,title:e.$t("achievements.list.modal.edit.header"),onModalClosed:a.onModalClosed,size:e.modalSize},{content:C((()=>{var l,a,n,d;return[o.showModal?(r(),y(s,{key:0,id:null==(l=i.achievementData)?void 0:l.id,name:null==(a=i.achievementData)?void 0:a.name,description:null==(n=i.achievementData)?void 0:n.description,type:null==(d=i.achievementData)?void 0:d.type,onSubmit:t[0]||(t[0]=t=>e.$emit("confirmClick"))},null,8,["id","name","description","type"])):M("",!0)]})),footerRightSection:C((()=>[h(n,{text:e.$t("achievements.list.modal.edit.button.remove.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full md:w-auto","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full","background-color-class":"bg-red-500",onButtonClick:t[1]||(t[1]=t=>e.$emit("removeClick"))},null,8,["text"])])),_:1},8,["is-visible","title","onModalClosed","size"])])}]]);const j={emits:["modalClosed","removeConfirmClick"],data:()=>({showModal:!1}),props:{isModalVisible:{type:Boolean,required:!0,default:!1},achievementData:{type:Object,required:!0}},components:{WarningModal:g},mixins:[b],methods:{onModalClosed(){this.$emit("modalClosed")}},updated(){this.showModal=this.isModalVisible}},U={class:"flex flex-wrap"},N={class:"container max-w-lg bg-white rounded dark:bg-gray-800 shadow-lg transform duration-200 easy-in-out m-1 md:m-6"},W={class:"text-lg mt-1"};var O=t({data:()=>({activeAchievement:null,isRemoveModalVisible:!1,isEditModalVisible:!1,achievementsForTypes:[]}),components:{RemoveModal:t(j,[["render",function(e,t,i,l,o,a){const s=d("WarningModal");return r(),m("div",null,[h(s,{"is-visible":o.showModal,size:e.modalSize,title:e.$t("achievements.list.modal.remove.header"),onModalClosed:a.onModalClosed,onConfirm:t[0]||(t[0]=t=>e.$emit("removeConfirmClick"))},{content:C((()=>[w(u(e.$t("achievements.list.modal.remove.description")),1)])),_:1},8,["is-visible","size","title","onModalClosed"])])}]]),EditModal:z,AddEditForm:R,Achievement:F,Container:x,Base:E},methods:{async onRemoveConfirm(){this.isRemoveModalVisible=!1,this.isEditModalVisible=!1,await this.$moduleCall.remove(k.ACHIEVEMENTS_BASE_URL,this.activeAchievement.id,!1),this.activeAchievement=null,this.fetchData()},async fetchData(){this.achievementsForTypes=await this.$moduleCall.getAll(k.ACHIEVEMENTS_BASE_URL)}},beforeMount(){this.fetchData()}},[["render",function(e,t,i,l,o,a){const s=d("Achievement"),n=d("AddEditForm"),p=d("Container"),v=d("Base"),f=d("RemoveModal"),b=d("EditModal");return r(),m(S,null,[h(v,{"info-block-description":e.$t("achievements.list.description"),"is-in-container":!1},{default:C((()=>[c("div",U,[(r(!0),m(S,null,V(o.achievementsForTypes,((e,t)=>(r(),m("div",{class:"main-wrapper self-baseline",key:t},[c("div",N,[c("h2",W,u(t.toUpperCase()),1),(r(!0),m(S,null,V(e,(e=>(r(),y(s,{key:JSON.stringify(e),type:t,name:e.name,description:e.description,onClick:t=>{o.isEditModalVisible=!0,o.activeAchievement=e}},null,8,["type","name","description","onClick"])))),128))])])))),128))]),h(p,null,{default:C((()=>[h(n,{header:e.$t("achievements.list.form.header"),onSubmit:a.fetchData},null,8,["header","onSubmit"])])),_:1})])),_:1},8,["info-block-description"]),h(f,{"is-modal-visible":o.isRemoveModalVisible,"achievement-data":o.activeAchievement,onModalClosed:t[0]||(t[0]=e=>{o.isRemoveModalVisible=!1,o.activeAchievement=null}),onRemoveConfirmClick:a.onRemoveConfirm,class:"relative z-30"},null,8,["is-modal-visible","achievement-data","onRemoveConfirmClick"]),h(b,{"is-modal-visible":o.isEditModalVisible,"achievement-data":o.activeAchievement,onModalClosed:t[1]||(t[1]=e=>{o.isEditModalVisible=!1,o.activeAchievement=null}),onConfirmClick:t[2]||(t[2]=e=>{o.isEditModalVisible=!1,o.activeAchievement=null,a.fetchData()}),onRemoveClick:t[3]||(t[3]=e=>o.isRemoveModalVisible=!0),class:"relative z-21"},null,8,["is-modal-visible","achievement-data"])],64)}],["__scopeId","data-v-3d6389d4"]]);export{O as default};
