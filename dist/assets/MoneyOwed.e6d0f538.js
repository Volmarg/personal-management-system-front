import{_ as e,aL as t,r as a,o,Y as l,aT as r,c as s,e as n,f as i,t as d,h as u,aa as p,aZ as h,k as m}from"./index.5c1c3a9f.js";import{B as c}from"./Base.16bb57ee.js";import{S as b}from"./SimpleTable.41d39b19.js";import{S as f}from"./SymfonyReportsRoutes.a4d69e79.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.ff32a711.js";import"./SearchInput.64a02e4e.js";import"./VuelidateHandler.ffbf1da4.js";const g={class:"filter-wrapper"},C={class:"filter"},y={class:"header"};var w=e({data(){return{targetFilter:null,targetSelectOptions:[],headers:[{label:this.$t("reports.historical.moneyOwed.tabs.shared.table.headers.target.label"),dataValuePath:"target.value",dataIsComponentPath:"target.isComponent",dataComponentPropertiesPath:null},{label:this.$t("reports.historical.moneyOwed.tabs.shared.table.headers.amount.label"),dataValuePath:"amount.value",dataIsComponentPath:"amount.isComponent",dataComponentPropertiesPath:null},{label:this.$t("reports.historical.moneyOwed.tabs.shared.table.headers.information.label"),dataValuePath:"information.value",dataIsComponentPath:"information.isComponent",dataComponentPropertiesPath:null},{label:this.$t("reports.historical.moneyOwed.tabs.shared.table.headers.date.label"),dataValuePath:"date.value",dataIsComponentPath:"date.isComponent",dataComponentPropertiesPath:null},{label:this.$t("reports.historical.moneyOwed.tabs.shared.table.headers.currency.label"),dataValuePath:"currency.value",dataIsComponentPath:"currency.isComponent",dataComponentPropertiesPath:null}]}},props:{data:{type:Array,required:!0}},components:{NoResultsText:r,TargetSelect:e({data:()=>({selectOptions:[],selectedValue:0}),props:{options:{type:Array,required:!0}},components:{MultiSelect:t},methods:{onOptionChanged(e){this.selectedValue=e,this.$emit("update:modelValue",e)}}},[["render",function(e,t,r,s,n,i){const d=a("MultiSelect");return o(),l(d,{label:e.$t("reports.historical.moneyOwed.tabs.shared.filter.target.label"),options:r.options,onChange:i.onOptionChanged,onSelect:i.onOptionChanged,onDeselect:i.onOptionChanged,onClear:i.onOptionChanged,onPaste:i.onOptionChanged,modelValue:n.selectedValue,"onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedValue=e),mode:"single","allow-show-options-list":!0,"allow-create-options":!1,required:!0},null,8,["label","options","onChange","onSelect","onDeselect","onClear","onPaste","modelValue"])}]]),SimpleTable:b},computed:{usedData(){let e=[];for(let t of this.data)this.targetFilter&&t.values.target.value!==this.targetFilter||e.push(t);return e}},methods:{setTargetSelectOptions(){let e=[],t=[];for(let a of this.usedData){let o=a.values.target.value;this.targetFilter&&a.values.target.value!==this.targetFilter||t.includes(o)||(t.push(o),e.push({label:s.ucFirst(o),value:o}))}this.targetSelectOptions=e}},mounted(){this.setTargetSelectOptions()},watch:{data(){this.setTargetSelectOptions()},targetFilter(){this.$refs.table.refresh()}}},[["render",function(e,t,r,s,h,m){const c=a("TargetSelect"),b=a("SimpleTable"),f=a("NoResultsText");return o(),n(p,null,[i("div",g,[i("div",C,[i("h2",y,d(e.$t("reports.historical.moneyOwed.tabs.shared.filter.header")),1),u(c,{options:h.targetSelectOptions,modelValue:h.targetFilter,"onUpdate:modelValue":t[0]||(t[0]=e=>h.targetFilter=e),class:"target-select"},null,8,["options","modelValue"])])]),r.data.length>0?(o(),l(b,{key:0,headers:h.headers,data:m.usedData,ref:"table"},null,8,["headers","data"])):(o(),l(f,{key:1}))],64)}],["__scopeId","data-v-2a0f5046"]]),O=e({props:{tableData:{type:Array,required:!0}},components:{OwnageTable:w}},[["render",function(e,t,l,r,s,i){const d=a("OwnageTable");return o(),n("div",null,[u(d,{data:l.tableData},null,8,["data"])])}]]),v=e({props:{tableData:{type:Array,required:!0}},components:{OwnageTable:w}},[["render",function(e,t,l,r,s,i){const d=a("OwnageTable");return o(),n("div",null,[u(d,{data:l.tableData},null,8,["data"])])}]]),P=e({data:()=>({owedEntries:[]}),components:{Base:c,Tabs:h},computed:{owedByMe(){let e=this.owedEntries.filter((e=>e.owedByMe));return this.buildTableData(e)},owedByOther(){let e=this.owedEntries.filter((e=>!e.owedByMe));return this.buildTableData(e)}},methods:{buildTableData(e){let t=[];for(let a of e)t.push({values:{target:{value:a.target,isComponent:!1},amount:{value:a.amount,isComponent:!1},information:{value:a.information,isComponent:!1},date:{value:a.date,isComponent:!1},currency:{value:a.currency,isComponent:!1}}});return t},buildTabsContent(){return[{tabName:this.$t("reports.historical.moneyOwed.tabs.owedByMe.label"),tabComponent:O,tabComponentProps:{tableData:this.owedByMe}},{tabName:this.$t("reports.historical.moneyOwed.tabs.owedByOthers.label"),tabComponent:v,tabComponentProps:{tableData:this.owedByOther}}]}},async beforeMount(){this.owedEntries=await this.$moduleCall.getAll(f.HISTORICALLY_OWED_MONEY_BASE_URL)}},[["render",function(e,t,r,s,n,i){const d=a("Tabs"),p=a("Base");return o(),l(p,{"info-block-description":e.$t("reports.historical.moneyOwed.description")},{default:m((()=>[u(d,{"tabs-with-content":i.buildTabsContent()},null,8,["tabs-with-content"])])),_:1},8,["info-block-description"])}]]);export{P as default};
