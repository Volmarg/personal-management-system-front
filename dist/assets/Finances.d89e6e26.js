import{S as e}from"./SimpleTable.2176e307.js";import{_ as t,aV as a,M as s,I as l,aW as n,ae as i,B as r,r as o,o as m,e as u,f as c,t as d,h as b}from"./index.93e753e6.js";import{T as f}from"./TableActions.b19e3a52.js";import{F as h}from"./FinancesCurrenciesState.290d9bf3.js";import"./SearchInput.c3a3a680.js";import"./ClipboardService.32914954.js";const p={data:()=>({oldName:null,form:{name:"",symbol:"",multiplier:"",isDefault:!1}}),props:{id:{type:[Number,null],required:!1,default:null},header:{type:String,required:!1,default:""},name:{type:[String,null],required:!1,default:null},symbol:{type:[String,null],required:!1,default:null},multiplier:{type:[Number,null],required:!1,default:null},isDefault:{type:Boolean,required:!1,default:!1}},components:{Checkbox:a,MediumButtonWithIcon:s,FormInput:l},methods:{clearForm(){this.form.name="",this.form.symbol="",this.form.multiplier="",this.form.isDefault=!1},async onSubmit(){let e,t={...this.form,oldName:this.oldName},a=new n(i.SETTINGS_FINANCES_BASE_URL,this.id,r,t);a.reload=!1,e=this.id?await this.$moduleCall.update(a):await this.$moduleCall.new(a),e.success&&(this.$emit("submit"),this.clearForm())}},beforeMount(){this.form.name=this.name,this.form.symbol=this.symbol,this.form.multiplier=this.multiplier,this.form.isDefault=this.isDefault,this.oldName=this.name}},y={class:"flex justify-center mt-10"},S={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},C={class:"text-lg"},g={class:"ml-6 flex flex-row hover:opacity-70 cursor-pointer"};var x=t(p,[["render",function(e,t,a,s,l,n){const i=o("FormInput"),r=o("Checkbox"),f=o("MediumButtonWithIcon");return m(),u("div",y,[c("div",S,[c("h2",C,d(a.header),1),b(i,{type:"text",modelValue:l.form.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.name=e),label:e.$t("systemSettings.tab.finances.currencies.form.name.label"),"question-mark-text":e.$t("systemSettings.tab.finances.currencies.form.name.about"),"is-required":!0},null,8,["modelValue","label","question-mark-text"]),b(i,{type:"text",modelValue:l.form.symbol,"onUpdate:modelValue":t[1]||(t[1]=e=>l.form.symbol=e),label:e.$t("systemSettings.tab.finances.currencies.form.symbol.label"),"question-mark-text":e.$t("systemSettings.tab.finances.currencies.form.symbol.about"),"is-required":!0},null,8,["modelValue","label","question-mark-text"]),b(i,{type:"number",modelValue:l.form.multiplier,"onUpdate:modelValue":t[2]||(t[2]=e=>l.form.multiplier=e),label:e.$t("systemSettings.tab.finances.currencies.form.multiplier.label"),"question-mark-text":e.$t("systemSettings.tab.finances.currencies.form.multiplier.about"),"is-required":!0},null,8,["modelValue","label","question-mark-text"]),c("div",g,[b(r,{class:"transform scale-75",modelValue:l.form.isDefault,"onUpdate:modelValue":t[3]||(t[3]=e=>l.form.isDefault=e),ref:"checkbox"},null,8,["modelValue"]),c("label",{class:"checkbox checkbox-all align-self-center ml-1 cursor-pointer",onClick:t[4]||(t[4]=e=>this.$refs.checkbox.toggle())},d(e.$t("systemSettings.tab.finances.currencies.form.isDefault.label")),1)]),b(f,{text:e.$t("systemSettings.tab.finances.currencies.form.submit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"ml-6 w-full mb-1 md:col-start-1 md:col-end-2 mt-6 pr-6 md:pr-0","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:n.onSubmit},null,8,["text","onButtonClick"])])])}]]);const P={class:"mt-10"},$={class:"text-lg"};var v=t({data(){return{store:null,allCurrencies:[],table:{headers:[{label:this.$t("systemSettings.tab.finances.currencies.table.headers.name.label"),dataValuePath:"name.value",dataIsComponentPath:"name.isComponent",dataComponentPropertiesPath:null},{label:this.$t("systemSettings.tab.finances.currencies.table.headers.symbol.label"),dataValuePath:"symbol.value",dataIsComponentPath:"symbol.isComponent",dataComponentPropertiesPath:null},{label:this.$t("systemSettings.tab.finances.currencies.table.headers.multiplier.label"),dataValuePath:"multiplier.value",dataIsComponentPath:"multiplier.isComponent",dataComponentPropertiesPath:null},{label:this.$t("systemSettings.tab.finances.currencies.table.headers.isDefault.label"),dataValuePath:"isDefault.value",dataIsComponentPath:"isDefault.isComponent",dataComponentPropertiesPath:null},{label:this.$t("systemSettings.tab.finances.currencies.table.headers.actions.label"),dataValuePath:"actions.value",dataIsComponentPath:"actions.isComponent",dataComponentPropertiesPath:"actions.componentProps"}]}}},components:{SimpleTable:e,AddEditForm:x},computed:{usedTableData(){let e=[];for(let t of this.allCurrencies)e.push({values:{name:{value:t.name,isComponent:!1},multiplier:{value:t.multiplier,isComponent:!1},symbol:{value:t.symbol,isComponent:!1},isDefault:{value:this.$t(`generic.bool.yesNo.${Number(t.isDefault)}`),rawValue:t.isDefault,isComponent:!1},actions:{value:f,isComponent:!0,componentProps:{editActionForm:x,identifierFieldName:"name",baseUrl:i.SETTINGS_FINANCES_BASE_URL,store:h}}}});return e}},methods:{async refreshPageState(){await this.store.getAll(),this.allCurrencies=this.store.allEntries}},async beforeMount(){this.store=h(),this.refreshPageState()},watch:{"store.allEntries":{deep:!0,handler:function(){this.allCurrencies=this.store.allEntries}}}},[["render",function(e,t,a,s,l,n){const i=o("SimpleTable"),r=o("AddEditForm");return m(),u("div",P,[c("h2",$,d(e.$t("systemSettings.tab.finances.currencies.header")),1),b(i,{headers:l.table.headers,data:this.usedTableData},null,8,["headers","data"]),b(r,{header:e.$t("systemSettings.tab.finances.currencies.form.header"),onSubmit:n.refreshPageState},null,8,["header","onSubmit"])])}]]);export{v as default};
