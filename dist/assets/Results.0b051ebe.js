import{_ as e,aU as t,bv as s,b0 as a,a$ as r,c as i,a3 as n,am as l,ax as o,af as u,Z as d,r as c,R as f,o as m,Y as h,k as g,f as y,t as b,e as x,ag as p,ab as R,h as S,g as _,j as w,X as v,W as k}from"./index.fd0df9df.js";import{a as A,A as E,B as T}from"./Base.b0f5291c.js";import{_ as q}from"./ModuleBaseDataMixin.a53b9ab8.js";import{S as $}from"./StorageState.3b816c65.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.5f37d705.js";const N={class:"text-md font-bold text-left -mt-7 ml-2"},O={class:"text-md font-bold text-left -mt-3 ml-2"},C={class:"mt-2 mb-10 flex flex-row flex-wrap"},B={class:"flex flex-wrap flex-row gap-4"},I=["onClick"],U={class:"widget w-full p-4 rounded-lg bg-white border border-gray-100 dark:bg-gray-900 dark:border-gray-800"},L={class:"flex flex-row items-center justify-between"},j={class:"flex flex-col"},P={class:"text-sm text-left text-gray-500"},D={class:"font-bold"},H={class:"text-md text-left font-bold"},M={key:0};var F=e({data:()=>({config:{identifier:{maxLen:45},name:{maxLen:38}},searchResults:{}}),components:{AccordionPanel:A,NoResultsText:t,Accordion:E,Badge:s,Base:T},mixins:[q],computed:{query(){return this.$route.query.query},queryWordsVariants(){if(!this.query)return[];let e=this.query.split(" "),t={};return a.cartesianProduct(e,t,2,0," "),[...e,...Object.values(t)].filter(Boolean)},hasAnyResults(){for(let e of Object.keys(this.searchResults))if(this.searchResults[e].length>0)return!0;return!1}},methods:{getName(e){return r.isNumber(e.name)?e.name:e.name.length>=this.config.name.maxLen?i.reduceStringToCharactersCount(e.name,this.config.name.maxLen):e.name},getIdentifier(e,t){let s=[];switch(t){case $[$.files]:case $[$.images]:case $[$.videos]:s=[e.identifiers[1]];break;case"notes":s=[e.identifiers[0]];break;default:s=e.identifiers}if(0===s.length)throw new n(`No identifiers were delivered for one of results for module: ${t} and query: ${this.query}`);if(1===s.length){let e=s[0];return r.isNumber(e)?e:this.handleStringIdentifier(e,this.config.identifier.maxLen)}let a=this.config.name.maxLen/s.length,i=[];for(let n in s){let t=s[n];r.isNumber(e.identifier)?i.push(t):i.push(this.handleStringIdentifier(t,a))}return JSON.stringify(i)},handleStringIdentifier:(e,t)=>e.length>=t?i.reduceStringToCharactersCount(e,t):e,moduleIconName(e){var t;let s=null!=(t=this.moduleIcon[e])?t:null;if(null===s)throw new n(`Unsupported module: ${e} - got no icon for it`);return s},moduleName(e){var t;let s=null!=(t=this.moduleTranslation[e])?t:null;if(null===s)throw new n(`Unsupported module: ${e} - got no translation for it`);return s},onResultClick(e,t){let s="";switch(t){case $[$.files]:s=this.buildStorageUrl(e.identifiers[1],l.ROUTE_PATH_STORAGE_FILES_FOLDER);break;case $[$.images]:s=this.buildStorageUrl(e.identifiers[1],l.ROUTE_PATH_STORAGE_IMAGES_FOLDER);break;case $[$.videos]:s=this.buildStorageUrl(e.identifiers[1],l.ROUTE_PATH_STORAGE_VIDEO_FOLDER);break;case"notes":s=this.buildNotesCategoryUrl(e.identifiers[0]);break;default:throw new n(`This module is not supported - cannot build url. Module: ${t}`)}this.$router.push(s),o.scrollToTop()},async fetchData(){this.searchResults=await this.$moduleCall.getAll(u.SEARCH_BASE,null,null,{query:this.$route.query.query})}},created(){this.fetchData()},watch:{"$route.query.query"(){i.isEmptyString(this.$route.query.query)||this.$route.name!==d.ROUTE_NAME_SEARCH_RESULTS||this.fetchData()}}},[["render",function(e,t,s,a,r,i){const n=c("Badge"),l=c("fa"),o=c("AccordionPanel"),u=c("Accordion"),d=c("NoResultsText"),A=c("Base"),E=f("tippy");return m(),h(A,{"is-in-container":!1},{default:g((()=>[y("h2",N," > "+b(e.$t("search.resultsPage.subHeader.query"))+" "+b(i.query),1),y("h2",O," > "+b(e.$t("search.resultsPage.subHeader.tags")),1),y("div",C,[(m(!0),x(R,null,p(i.queryWordsVariants,(e=>(m(),h(n,{key:e,class:"my-1 mx-1"},{default:g((()=>[w(b(e),1)])),_:2},1024)))),128))]),(m(!0),x(R,null,p(r.searchResults,((t,s)=>(m(),x("div",{key:JSON.stringify(t)},[t.length>0?(m(),h(u,{key:0,class:"important-information-accordion"},{default:g((()=>[S(o,{class:"accordion-panel"},{title:g((()=>[S(l,{icon:i.moduleIconName(s)},null,8,["icon"]),w(" "+b(i.moduleName(s)),1)])),content:g((()=>[y("div",B,[(m(!0),x(R,null,p(t,(t=>v((m(),x("div",{key:JSON.stringify(t),class:"mb-5 single-result",onClick:e=>i.onResultClick(t,s)},[y("div",U,[y("div",L,[y("div",j,[y("div",P,[y("span",D,b(e.$t("search.resultsPage.singleResult.text.id")),1),y("span",null,b(i.getIdentifier(t,s)),1)]),y("div",H,b(i.getName(t)),1)]),k(e.$slots,"icon",{},void 0,!0)])])],8,I)),[[E,{content:e.$t("search.resultsPage.singleResult.text.hover"),placement:"top"}]]))),128))])])),_:2},1024)])),_:2},1024)):_("",!0)])))),128)),i.hasAnyResults?_("",!0):(m(),x("div",M,[S(d)]))])),_:3})}],["__scopeId","data-v-945a4704"]]);export{F as default};
