import{_ as e,I as a,aV as t,M as o,aW as l,B as s,r as n,o as r,e as m,f as i,t as d,h as u,aE as p,aF as b,aX as h,aS as c,aa as f,af as g,Y as y,g as C,aI as P,aY as S,k as w}from"./index.7d9fe974.js";import{S as V}from"./SymfonyGoalsRoutes.51b86fab.js";import{B as v}from"./Base.ab092e87.js";import{T as x}from"./TableActions.6c3f4113.js";import{S as $}from"./SimpleTable.b7ae8abd.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.336f836a.js";import"./ClipboardService.91f50b7a.js";import"./SearchInput.85a30b8f.js";const D={data:()=>({form:{name:"",start:"",end:"",goal:0,collected:0,isForDashboard:!1}}),props:{id:{type:[Number,null],required:!1,default:null},name:{type:String,required:!1,default:""},start:{type:String,required:!1,default:""},end:{type:String,required:!1,default:""},goal:{type:[String,Number],required:!1,default:0},collected:{type:[String,Number],required:!1,default:0},isForDashboard:{type:Boolean,required:!1,default:!1}},components:{FormInput:a,Checkbox:t,MediumButtonWithIcon:o},beforeMount(){this.form.name=this.name,this.form.start=this.start,this.form.end=this.end,this.form.goal=this.goal,this.form.collected=this.collected,this.form.isForDashboard=this.isForDashboard},methods:{resetForm(){this.form.name="",this.form.start="",this.form.end="",this.form.goal=0,this.form.collected=0,this.form.isForDashboard=!1},async onSubmit(){let e,a=new l(V.GOAL_PAYMENTS_BASE_URL,this.id,s,this.form);a.parentId=this.issueId,a.reload=!1,e=this.id?await this.$moduleCall.update(a):await this.$moduleCall.new(a),e.success&&(this.resetForm(),this.$emit("submit"))}}},F={class:"flex justify-center"},B={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},k={class:"text-lg mb-2"},I={class:"mb-4 flex flex-row hover:opacity-70 cursor-pointer"};var T=e(D,[["render",function(e,a,t,o,l,s){const p=n("FormInput"),b=n("Checkbox"),h=n("MediumButtonWithIcon");return r(),m("div",F,[i("div",B,[i("h2",k,d(e.$t("goals.payments.form.header")),1),u(p,{type:"text",modelValue:l.form.name,"onUpdate:modelValue":a[0]||(a[0]=e=>l.form.name=e),"is-required":!0,label:e.$t("goals.payments.form.name.label")},null,8,["modelValue","label"]),u(p,{type:"date",modelValue:l.form.start,"onUpdate:modelValue":a[1]||(a[1]=e=>l.form.start=e),"is-required":!0,label:e.$t("goals.payments.form.start.label")},null,8,["modelValue","label"]),u(p,{type:"date",modelValue:l.form.end,"onUpdate:modelValue":a[2]||(a[2]=e=>l.form.end=e),"is-required":!0,label:e.$t("goals.payments.form.end.label")},null,8,["modelValue","label"]),u(p,{type:"number",modelValue:l.form.goal,"onUpdate:modelValue":a[3]||(a[3]=e=>l.form.goal=e),"is-required":!0,label:e.$t("goals.payments.form.goal.label")},null,8,["modelValue","label"]),u(p,{type:"number",modelValue:l.form.collected,"onUpdate:modelValue":a[4]||(a[4]=e=>l.form.collected=e),"is-required":!0,label:e.$t("goals.payments.form.collected.label")},null,8,["modelValue","label"]),i("div",I,[u(b,{class:"transform scale-75",modelValue:l.form.isForDashboard,"onUpdate:modelValue":a[5]||(a[5]=e=>l.form.isForDashboard=e),ref:"showOnDashboard",onClick:a[6]||(a[6]=a=>e.$refs.showOnDashboard.toggle())},null,8,["modelValue"]),i("label",{class:"checkbox checkbox-all align-self-center ml-1 cursor-pointer",onClick:a[7]||(a[7]=a=>e.$refs.showOnDashboard.toggle())},d(e.$t("goals.payments.form.showOnDashboard.label")),1)]),u(h,{text:e.$t("job.holidays.shared.form.submit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-6","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:s.onSubmit},null,8,["text","onButtonClick"])])])}]]);const A=p("goalPaymentsState",{state:()=>({allEntries:[]}),actions:{async getAll(){this.allEntries=await(new b).getAll(V.GOAL_PAYMENTS_BASE_URL)}}}),N={class:"flex flex-wrap flex-row justify-between"};var j=e({data:()=>({paymentsStore:null}),components:{SinglePaymentBlock:h,NoResultsText:c},beforeMount(){this.paymentsStore=A(),this.paymentsStore.getAll()}},[["render",function(e,a,t,o,l,s){const d=n("SinglePaymentBlock"),u=n("NoResultsText");return r(),m(f,null,[i("div",N,[(r(!0),m(f,null,g(l.paymentsStore.allEntries,(e=>(r(),y(d,{key:JSON.stringify(e),"payment-data":e},null,8,["payment-data"])))),128))]),0===l.paymentsStore.allEntries.length?(r(),y(u,{key:0})):C("",!0)],64)}]]),q=e({data(){return{paymentsStore:null,tableHeaders:[{label:"id",dataValuePath:"id.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("goals.payments.tab.manage.table.header.name.label"),dataValuePath:"name.value",dataIsComponentPath:"name.isComponent",dataComponentPropertiesPath:null},{label:this.$t("goals.payments.tab.manage.table.header.start.label"),dataValuePath:"start.value",dataIsComponentPath:"start.isComponent",dataComponentPropertiesPath:null},{label:this.$t("goals.payments.tab.manage.table.header.end.label"),dataValuePath:"end.value",dataIsComponentPath:"end.isComponent",dataComponentPropertiesPath:null},{label:this.$t("goals.payments.tab.manage.table.header.goal.label"),dataValuePath:"goal.value",dataIsComponentPath:"goal.isComponent",dataComponentPropertiesPath:null},{label:this.$t("goals.payments.tab.manage.table.header.collected.label"),dataValuePath:"collected.value",dataIsComponentPath:"collected.isComponent",dataComponentPropertiesPath:null},{label:this.$t("goals.payments.tab.manage.table.header.showOnDashboard.label"),dataValuePath:"isForDashboard.value",dataRawValuePath:"isForDashboard.rawValue",dataIsComponentPath:"isForDashboard.isComponent",dataComponentPropertiesPath:null},{label:this.$t("goals.payments.tab.manage.table.header.actions.label"),dataValuePath:"actions.value",dataIsComponentPath:"actions.isComponent",dataComponentPropertiesPath:"actions.componentProps"}]}},components:{SimpleTable:$,NoResultsText:c},computed:{usedTableData(){let e=[];for(let a of this.paymentsStore.allEntries)e.push({values:{id:{value:a.id,isComponent:!1},name:{value:a.name,isComponent:!1},start:{value:a.start,isComponent:!1},end:{value:a.end,isComponent:!1},goal:{value:a.goal,isComponent:!1},collected:{value:a.collected,isComponent:!1},isForDashboard:{value:this.$t(`goals.payments.tab.manage.table.header.showOnDashboard.state.${Number(a.showOnDashboard)}.label`),rawValue:a.showOnDashboard,isComponent:!1},actions:{value:x,isComponent:!0,componentProps:{editActionForm:T,baseUrl:V.GOAL_PAYMENTS_BASE_URL,store:A}}}});return e}},beforeMount(){this.paymentsStore=A(),this.paymentsStore.getAll()}},[["render",function(e,a,t,o,l,s){const m=n("SimpleTable"),i=n("NoResultsText");return s.usedTableData.length>0?(r(),y(m,{key:0,headers:l.tableHeaders,data:s.usedTableData,ref:"table",class:"mt-4"},null,8,["headers","data"])):(r(),y(i,{key:1}))}]]),E=e({data:()=>({activePayment:null}),components:{CreateUpdateForm:T,Container:P,Base:v,Tabs:S},computed:{tabsContent(){return[{tabName:this.$t("goals.payments.tab.list.header"),tabComponent:j,tabComponentProps:{}},{tabName:this.$t("goals.payments.tab.manage.header"),tabComponent:q,tabComponentProps:{}}]}},methods:{onSubmit(){A().getAll()}}},[["render",function(e,a,t,o,l,s){const m=n("Tabs"),i=n("CreateUpdateForm"),d=n("Container"),p=n("Base");return r(),y(p,{"info-block-description":e.$t("goals.payments.description"),"is-in-container":!1},{default:w((()=>[u(m,{"tabs-with-content":s.tabsContent},null,8,["tabs-with-content"]),u(d,{class:"mt-4"},{default:w((()=>[u(i,{onSubmit:s.onSubmit},null,8,["onSubmit"])])),_:1})])),_:1},8,["info-block-description"])}]]);export{E as default};
