import{B as e}from"./Base.b55dfd74.js";import{_ as t,I as a,M as n,aW as l,B as s,r as o,o as r,e as i,f as m,t as u,h as d,aE as p,aF as c,aS as h,Y as y,aa as b,aY as f,k as P}from"./index.db8bde11.js";import{S as C}from"./SimpleTable.f571356e.js";import{T,P as g}from"./PaymentTypeSelect.a8cc811d.js";import{S}from"./SymfonyPaymentsRoutes.6d013679.js";import{T as v}from"./TableActions.744b2f39.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.86dcbce2.js";import"./SearchInput.ef99a9ef.js";import"./ClipboardService.e68b9e1f.js";const w={class:"flex justify-center"},I={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},M={class:"text-lg"};var E=t({data:()=>({form:{dayOfMonth:null,amount:null,description:null,typeId:null}}),props:{dayOfMonth:{type:[Number,null],required:!1,default:null},header:{type:[String,null],required:!1,default:null},typeId:{type:[Number,null],required:!1,default:null},id:{type:[Number,null],required:!1,default:null},description:{type:[String,null],required:!1,default:null},name:{type:[String,null],required:!1,default:null},amount:{type:[Number,null],required:!1,default:null}},components:{TypeSelect:T,FormInput:a,MediumButtonWithIcon:n},methods:{clearForm(){this.form.dayOfMonth=null,this.form.amount=null,this.form.description=null,this.form.typeId=null},async onSubmit(){let e,t=new l(S.SETTINGS_RECURRING_PAYMENT_BASE_URL,this.id,s,this.form);t.reload=!1,e=this.id?await this.$moduleCall.update(t):await this.$moduleCall.new(t),e.success&&(this.$emit("submit"),this.clearForm())}},beforeMount(){this.form.dayOfMonth=this.dayOfMonth,this.form.typeId=this.typeId,this.form.description=this.description,this.form.amount=this.amount}},[["render",function(e,t,a,n,l,s){const p=o("FormInput"),c=o("TypeSelect"),h=o("MediumButtonWithIcon");return r(),i("div",w,[m("div",I,[m("h2",M,u(a.header),1),d(p,{type:"number",modelValue:l.form.dayOfMonth,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.dayOfMonth=e),"is-required":!0,label:e.$t("payments.settings.tab.recurringPayments.table.newForm.dayOfMonth.label")},null,8,["modelValue","label"]),d(p,{type:"number",modelValue:l.form.amount,"onUpdate:modelValue":t[1]||(t[1]=e=>l.form.amount=e),"is-required":!0,label:e.$t("payments.settings.tab.recurringPayments.table.newForm.money.label")},null,8,["modelValue","label"]),d(p,{type:"text",modelValue:l.form.description,"onUpdate:modelValue":t[2]||(t[2]=e=>l.form.description=e),"is-required":!0,label:e.$t("payments.settings.tab.recurringPayments.table.newForm.description.label")},null,8,["modelValue","label"]),d(c,{modelValue:l.form.typeId,"onUpdate:modelValue":t[3]||(t[3]=e=>l.form.typeId=e)},null,8,["modelValue"]),d(h,{text:e.$t("payments.settings.tab.recurringPayments.table.newForm.submit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-5","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:s.onSubmit},null,8,["text","onButtonClick"])])])}]]);const x=p("paymentsSettingsRecurringPaymentState",{state:()=>({allEntries:[]}),actions:{async getAll(){this.allEntries=await(new c).getAll(S.SETTINGS_RECURRING_PAYMENT_BASE_URL)}}}),N={data(){return{store:null,allPayments:[],headers:[{label:"id",dataValuePath:"id.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:"typeId",dataValuePath:"typeId.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("payments.settings.tab.recurringPayments.table.header.dayOfMonth"),dataValuePath:"dayOfMonth.value",dataIsComponentPath:"dayOfMonth.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.settings.tab.recurringPayments.table.header.money"),dataValuePath:"amount.value",dataIsComponentPath:"amount.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.settings.tab.recurringPayments.table.header.description"),dataValuePath:"description.value",dataIsComponentPath:"description.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.settings.tab.recurringPayments.table.header.type"),dataValuePath:"type.value",dataIsComponentPath:"type.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.settings.tab.recurringPayments.table.header.actions"),dataValuePath:"actions.value",dataIsComponentPath:"actions.isComponent",dataComponentPropertiesPath:"actions.componentProps"}]}},props:{data:{type:Array,required:!0},paymentTypesData:{type:Array,required:!0}},components:{AddEditForm:E,NoResultsText:h,SimpleTable:C},computed:{usedTableData(){let e=[];for(let t of this.allPayments)e.push({values:{id:{value:t.id,isComponent:!1},typeId:{value:t.typeId,isComponent:!1},dayOfMonth:{value:t.dayOfMonth,isComponent:!1},amount:{value:t.amount,isComponent:!1},description:{value:t.description,isComponent:!1},type:{value:t.typeName,isComponent:!1},actions:{value:v,isComponent:!0,componentProps:{editActionForm:E,baseUrl:S.SETTINGS_RECURRING_PAYMENT_BASE_URL,store:x}}}});return e}},methods:{async refreshPageState(){await this.store.getAll(),this.allPayments=this.store.allEntries}},async beforeMount(){this.store=x(),this.refreshPageState()},watch:{"store.allEntries":{deep:!0,handler:function(){this.allPayments=this.store.allEntries}}}},V=m("hr",{class:"mt-5 mb-5"},null,-1);var $=t(N,[["render",function(e,t,a,n,l,s){const u=o("SimpleTable"),p=o("NoResultsText"),c=o("AddEditForm");return r(),i(b,null,[m("div",null,[a.data.length>0?(r(),y(u,{key:0,headers:l.headers,data:s.usedTableData,ref:"table",class:"mt-4"},null,8,["headers","data"])):(r(),y(p,{key:1}))]),V,d(c,{header:e.$t("payments.settings.tab.recurringPayments.table.newForm.header"),onSubmit:s.refreshPageState},null,8,["header","onSubmit"])],64)}]]);const _={class:"flex justify-center"},R={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},B={class:"text-lg"};var A=t({components:{FormInput:a,MediumButtonWithIcon:n},data:()=>({form:{name:null}}),props:{header:{type:String,required:!1,default:""},id:{type:[Number,null],required:!1,default:null},name:{type:[String,null],required:!1,default:null}},methods:{clearForm(){this.form.name=""},async onSubmit(){let e,t=new l(S.SETTINGS_PAYMENT_TYPE_BASE_URL,this.id,s,this.form);t.reload=!1,e=this.id?await this.$moduleCall.update(t):await this.$moduleCall.new(t),e.success&&(this.$emit("submit"),this.clearForm())}},beforeMount(){this.form.name=this.name}},[["render",function(e,t,a,n,l,s){const p=o("FormInput"),c=o("MediumButtonWithIcon");return r(),i("div",_,[m("div",R,[m("h2",B,u(a.header),1),d(p,{type:"text",modelValue:l.form.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.name=e),"is-required":!0,label:e.$t("payments.settings.tab.paymentTypes.table.newForm.typeName.label")},null,8,["modelValue","label"]),d(c,{text:e.$t("payments.settings.tab.paymentTypes.table.newForm.submit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-5","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:s.onSubmit},null,8,["text","onButtonClick"])])])}]]);const F={data(){return{store:null,allTypes:[],headers:[{label:"id",dataValuePath:"id.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("payments.settings.tab.paymentTypes.table.header.name"),dataValuePath:"name.value",dataIsComponentPath:"name.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.settings.tab.paymentTypes.table.header.actions"),dataValuePath:"actions.value",dataIsComponentPath:"actions.isComponent",dataComponentPropertiesPath:"actions.componentProps"}]}},props:{data:{type:Array,required:!0}},components:{AddEditForm:A,NoResultsText:h,SimpleTable:C},computed:{usedTableData(){let e=[];for(let t of this.allTypes)e.push({values:{id:{value:t.id,isComponent:!1},name:{value:t.name,isComponent:!1},actions:{value:v,isComponent:!0,componentProps:{editActionForm:A,baseUrl:S.SETTINGS_PAYMENT_TYPE_BASE_URL,store:g}}}});return e}},methods:{async refreshPageState(){await this.store.getAll(),this.allTypes=this.store.allEntries}},async beforeMount(){this.store=g(),this.refreshPageState()},watch:{"store.allEntries":{deep:!0,handler:function(){this.allTypes=this.store.allEntries}}}},U=m("hr",{class:"mt-5 mb-5"},null,-1);var q=t(F,[["render",function(e,t,a,n,l,s){const u=o("SimpleTable"),p=o("NoResultsText"),c=o("AddEditForm");return r(),i(b,null,[m("div",null,[a.data.length>0?(r(),y(u,{key:0,headers:l.headers,data:s.usedTableData,ref:"table",class:"mt-4"},null,8,["headers","data"])):(r(),y(p,{key:1}))]),U,d(c,{header:e.$t("payments.settings.tab.paymentTypes.table.newForm.header"),onSubmit:s.refreshPageState},null,8,["header","onSubmit"])],64)}]]);const O={class:"flex justify-center"},j={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},k={class:"text-lg"};var D=t({data:()=>({form:{currencyMultiplier:null}}),components:{FormInput:a,MediumButtonWithIcon:n},methods:{async onSubmit(){let e,t=new l(S.SETTINGS_CURRENCY_MULTIPLIER_BASE_URL,this.id,s,this.form);t.reload=!1,e=await this.$moduleCall.update(t),e.success&&this.$emit("submit")}},async beforeMount(){let e=await this.$moduleCall.get(S.SETTINGS_CURRENCY_MULTIPLIER_BASE_URL);this.form.currencyMultiplier=e.value}},[["render",function(e,t,a,n,l,s){const p=o("FormInput"),c=o("MediumButtonWithIcon");return r(),i("div",O,[m("div",j,[m("h2",k,u(e.$t("payments.settings.tab.other.currencyMultiplier.form.header")),1),d(p,{type:"text",modelValue:l.form.currencyMultiplier,"onUpdate:modelValue":t[0]||(t[0]=e=>l.form.currencyMultiplier=e),"is-required":!0,label:e.$t("payments.settings.tab.other.currencyMultiplier.form.currencyMultiplier.label")},null,8,["modelValue","label"]),d(c,{text:e.$t("payments.settings.tab.other.currencyMultiplier.form.submit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-5","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:s.onSubmit},null,8,["text","onButtonClick"])])])}]]),L=t({data:()=>({recurringPaymentsTableData:[{values:{id:{value:1,isComponent:!1},dayOfMonth:{value:"Phone",isComponent:!1},money:{value:"22.30",isComponent:!1},description:{value:"O2",isComponent:!1},type:{value:"Monthly Payments",isComponent:!1}}},{values:{id:{value:2,isComponent:!1},dayOfMonth:{value:"TV",isComponent:!1},money:{value:"11.11",isComponent:!1},description:{value:"Netflix",isComponent:!1},type:{value:"Monthly Payments",isComponent:!1}}}],paymentTypesTableData:[{values:{id:{value:1,isComponent:!1},name:{value:"Monthly payments",isComponent:!1}}},{values:{id:{value:2,isComponent:!1},name:{value:"Personal",isComponent:!1}}}]}),components:{Tabs:f,Base:e},computed:{tabsContent(){return[{tabName:this.$t("payments.settings.tab.recurringPayments.header"),tabComponent:$,tabComponentProps:{data:this.recurringPaymentsTableData,paymentTypesData:this.paymentTypesTableData}},{tabName:this.$t("payments.settings.tab.paymentTypes.header"),tabComponent:q,tabComponentProps:{data:this.paymentTypesTableData}},{tabName:this.$t("payments.settings.tab.other.header"),tabComponent:D}]}}},[["render",function(e,t,a,n,l,s){const i=o("Tabs"),m=o("Base");return r(),y(m,{"info-block-description":e.$t("payments.settings.description"),"is-in-container":!1},{default:P((()=>[d(i,{"tabs-with-content":s.tabsContent},null,8,["tabs-with-content"])])),_:1},8,["info-block-description"])}]]);export{L as default};
