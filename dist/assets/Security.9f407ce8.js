import{_ as s,Q as o,M as i,a0 as e,S as a,T as t,r as n,o as l,e as r,h as d,k as c,ab as h}from"./index.93e753e6.js";import{P as u}from"./PasswordWithConfirmation.97696979.js";import{_ as w}from"./DemoAwareMixin.e29999cc.js";import{S as m,_ as C,R as g}from"./ResponsiveViewNavMixin.67f163e8.js";import"./index.esm.acd14812.js";var f=s({data:()=>({rawPassword:null,rawConfirmPassword:null}),props:{isVisible:{type:Boolean,required:!0},isLockPassword:{type:Boolean,required:!1,default:!1}},emits:["modalClosed"],mixins:[o,w],components:{PasswordWithConfirmation:u,MediumButtonWithIcon:i,Modal:e},computed:{translationGroup(){return this.isLockPassword?"changeLockPassword":"changePassword"}},methods:{onPasswordChanged(s){this.rawPassword=s,this.rawConfirmPassword=s},onConfirmPasswordChanged(s){this.rawConfirmPassword=s},validateForm(){return this.$refs.passwordWithConfirmation.validateInput()},save(){if(this.isDemo||!this.validateForm())return;let s=this.isLockPassword?m.URL_CHANGE_LOCK_PASSWORD:m.URL_CHANGE_PASSWORD,o=a.buildUrl(s),i={password:this.rawPassword,passwordConfirmed:this.rawConfirmPassword};this.$rootEvent.showFullPageLoader(),this.$axios.post(o,i).then((s=>{if(this.$rootEvent.hideFullPageLoader(),s.isMessageSet()){let o=s.success?t.success:t.error;this.$rootEvent.showNotification(o,s.message)}}))}}},[["render",function(s,o,i,e,a,t){const h=n("PasswordWithConfirmation"),u=n("MediumButtonWithIcon"),w=n("Modal",!0);return l(),r("div",null,[d(w,{title:s.$t(`userSettings.tab.security.children.${t.translationGroup}.dialog.header`),"is-visible":i.isVisible,"is-close-full-width":!0,onModalClosed:o[0]||(o[0]=o=>s.$emit("modalClosed")),size:s.isPhoneBreakingPoint?"full":"medium"},{content:c((()=>[d(h,{onBothPasswordsChanged:t.onPasswordChanged,onPasswordChanged:t.onPasswordChanged,onConfirmPasswordChanged:t.onConfirmPasswordChanged,ref:"passwordWithConfirmation",class:"mb-6"},null,8,["onBothPasswordsChanged","onPasswordChanged","onConfirmPasswordChanged"])])),footerRightSection:c((()=>[d(u,{"background-color-class":"bg-blue-500",text:s.$t(`userSettings.tab.security.children.${t.translationGroup}.form.submit.label`),disabled:s.isDemo,class:"w-full sm:w-auto m-0-force","button-classes":"w-full sm:w-auto","text-classes":"text-center w-full",onClick:t.save},null,8,["text","disabled","onClick"])])),_:1},8,["title","is-visible","size"])])}]]),P=s({mixins:[C],components:{ChangeLockPassword:s({data:()=>({isModalVisible:!1}),components:{ChangePasswordModal:f,MediumButtonWithIcon:i,la:h},methods:{showDialog(){this.isModalVisible=!0},onModalClosed(){this.isModalVisible=!1}}},[["render",function(s,o,i,e,a,t){const h=n("la"),u=n("MediumButtonWithIcon"),w=n("ChangePasswordModal");return l(),r("div",null,[d(u,{text:s.$t("userSettings.tab.security.children.changeLockPassword.label"),"is-icon-on-top":!0,onClick:t.showDialog,"button-classes":"user-settings-view-button"},{icon:c((()=>[d(h,{color:"white","svg-icon-name":"key-solid","font-size":"20"})])),_:1},8,["text","onClick"]),d(w,{"is-visible":a.isModalVisible,"is-lock-password":!0,onModalClosed:t.onModalClosed},null,8,["is-visible","onModalClosed"])])}]]),ChangePassword:s({data:()=>({isModalVisible:!1}),components:{ChangePasswordModal:f,MediumButtonWithIcon:i,la:h},methods:{showDialog(){this.isModalVisible=!0},onModalClosed(){this.isModalVisible=!1}}},[["render",function(s,o,i,e,a,t){const h=n("la"),u=n("MediumButtonWithIcon"),w=n("ChangePasswordModal");return l(),r("div",null,[d(u,{text:s.$t("userSettings.tab.security.children.changePassword.label"),"is-icon-on-top":!0,onClick:t.showDialog,"button-classes":"user-settings-view-button"},{icon:c((()=>[d(h,{color:"white","svg-icon-name":"key-solid","font-size":"20"})])),_:1},8,["text","onClick"]),d(w,{"is-visible":a.isModalVisible,onModalClosed:t.onModalClosed},null,8,["is-visible","onModalClosed"])])}]]),Row:g}},[["render",function(s,o,i,e,a,t){const h=n("ChangePassword"),u=n("ChangeLockPassword"),w=n("Row");return l(),r("div",null,[d(w,{"is-content-equally-distributed":!0,"flex-direction":s.rowFlexDirection},{default:c((()=>[d(h),d(u)])),_:1},8,["flex-direction"])])}]]);export{P as default};
