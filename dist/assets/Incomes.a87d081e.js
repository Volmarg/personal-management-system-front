import{_ as e,M as t,aI as a,I as n,aW as o,B as l,r as s,o as r,Y as i,k as m,f as u,t as d,h as c,aS as p,aE as f,aF as h}from"./index.7d9fe974.js";import{C as b}from"./CurrencySelect.089676c0.js";import{S as y}from"./SymfonyPaymentsRoutes.a2babd69.js";import{S as C}from"./SimpleTable.b7ae8abd.js";import{B as P}from"./Base.ab092e87.js";import{T as S}from"./TableActions.6c3f4113.js";import"./FinancesCurrenciesState.5480ae59.js";import"./SearchInput.85a30b8f.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.336f836a.js";import"./ClipboardService.91f50b7a.js";const I={class:"flex justify-center"},w={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},V={class:"text-lg"};var v=e({data:()=>({form:{date:null,amount:null,information:null,currency:null}}),props:{id:{type:[Number,null],required:!1,default:null},date:{type:[String,null],required:!1,default:null},amount:{type:[Number,null],required:!1,default:null},information:{type:[String,null],required:!1,default:null},currency:{type:[String,null],required:!1,default:null}},components:{MediumButtonWithIcon:t,Container:a,FormInput:n,CurrencySelect:b},methods:{clearForm(){this.form.date=null,this.form.amount=null,this.form.information=null,this.form.currency=null},async onSubmit(){let e,t=new o(y.INCOMES_BASE_URL,this.id,l,this.form);t.reload=!1,e=this.id?await this.$moduleCall.update(t):await this.$moduleCall.new(t),e.success&&(this.$emit("submit"),this.clearForm())}},beforeMount(){this.form.date=this.date,this.form.amount=this.amount,this.form.information=this.information,this.form.currency=this.currency}},[["render",function(e,t,a,n,o,l){const p=s("FormInput"),f=s("CurrencySelect"),h=s("MediumButtonWithIcon"),b=s("Container");return r(),i(b,null,{default:m((()=>[u("div",I,[u("div",w,[u("h2",V,d(e.$t("payments.incomes.newForm.header")),1),c(p,{type:"date",modelValue:o.form.date,"onUpdate:modelValue":t[0]||(t[0]=e=>o.form.date=e),"is-required":!0,label:e.$t("payments.incomes.newForm.date.label")},null,8,["modelValue","label"]),c(p,{type:"number",modelValue:o.form.amount,"onUpdate:modelValue":t[1]||(t[1]=e=>o.form.amount=e),"is-required":!0,label:e.$t("payments.incomes.newForm.amount.label")},null,8,["modelValue","label"]),c(p,{type:"text",modelValue:o.form.information,"onUpdate:modelValue":t[2]||(t[2]=e=>o.form.information=e),"is-required":!0,label:e.$t("payments.incomes.newForm.information.label")},null,8,["modelValue","label"]),c(f,{modelValue:o.form.currency,"onUpdate:modelValue":t[3]||(t[3]=e=>o.form.currency=e)},null,8,["modelValue"]),c(h,{text:e.$t("payments.incomes.newForm.submit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-6","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:l.onSubmit},null,8,["text","onButtonClick"])])])])),_:1})}]]),B=e({data(){return{allYears:[],yearFilter:null,headers:[{label:"id",dataValuePath:"id.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("payments.incomes.table.header.amount.label"),dataValuePath:"amount.value",dataIsComponentPath:"amount.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.incomes.table.header.information.label"),dataValuePath:"information.value",dataIsComponentPath:"information.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.incomes.table.header.date.label"),dataValuePath:"date.value",dataIsComponentPath:"date.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.incomes.table.header.currency.label"),dataValuePath:"currency.value",dataIsComponentPath:"currency.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.incomes.table.header.actions.label"),dataValuePath:"actions.value",dataIsComponentPath:"actions.isComponent",dataComponentPropertiesPath:"actions.componentProps"}]}},props:{data:{type:Array,required:!0}},components:{NoResultsText:p,SimpleTable:C,Container:a}},[["render",function(e,t,a,n,o,l){const u=s("SimpleTable"),d=s("NoResultsText"),c=s("Container");return r(),i(c,null,{default:m((()=>[a.data.length>0?(r(),i(u,{key:0,headers:o.headers,data:a.data,ref:"table",class:"mt-4"},null,8,["headers","data"])):(r(),i(d,{key:1}))])),_:1})}]]);const F=f("paymentIncomeState",{state:()=>({allEntries:[]}),actions:{async getAll(){this.allEntries=await(new h).getAll(y.INCOMES_BASE_URL)}}});var x=e({data:()=>({store:null,allIncomes:[]}),components:{Base:P,AddEditForm:v,IncomesTable:B},computed:{usedTableData(){let e=[];for(let t of this.allIncomes)e.push({values:{id:{value:t.id,isComponent:!1},information:{value:t.information,isComponent:!1},currency:{value:t.currency,isComponent:!1},date:{value:t.date,isComponent:!1},amount:{value:t.amount,isComponent:!1},actions:{value:S,isComponent:!0,componentProps:{editActionForm:v,baseUrl:y.INCOMES_BASE_URL,store:F}}}});return e}},methods:{async refreshPageState(){await this.store.getAll(),this.allIncomes=this.store.allEntries}},async beforeMount(){this.store=F(),this.refreshPageState()},watch:{"store.allEntries":{deep:!0,handler:function(){this.allIncomes=this.store.allEntries}}}},[["render",function(e,t,a,n,o,l){const u=s("IncomesTable"),d=s("AddEditForm"),p=s("Base");return r(),i(p,{"info-block-description":e.$t("payments.incomes.description"),"is-in-container":!1},{default:m((()=>[c(u,{data:l.usedTableData,class:"mb-6"},null,8,["data"]),c(d,{onSubmit:l.refreshPageState},null,8,["onSubmit"])])),_:1},8,["info-block-description"])}]]);export{x as default};
