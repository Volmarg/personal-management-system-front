import{_ as e,aK as t,r as o,o as a,Y as i,g as s}from"./index.7d9fe974.js";import{C as r}from"./CategoriesState.df56e7c1.js";var n=e({data:()=>({categoriesStore:null,areOptionsReady:!1,options:[],categories:[],value:0}),props:{required:{type:Boolean,required:!1,default:!1},selected:{type:Number,required:!1,default:0},label:{type:String,required:!0}},components:{MultiSelect:t},methods:{traverseTree(){for(let e of this.categories)this.addOption(e,0),this.traverseNode(e);this.areOptionsReady=!0},traverseNode(e){if(e.children)for(let t of e.children){if(!this.options.find((e=>e.value==t.id))){let e=this.categoriesStore.getCategoryNestingLevel(t.parentId);this.addOption(t,e)}this.traverseNode(t)}},addOption(e,t){this.options.push({label:"ã…¤".repeat(t)+e.name,selectedLabel:e.name,value:e.id})},onOptionChanged(e){this.value=e,this.$emit("update:modelValue",e)},buildCategories(){this.options=[],this.categories=this.categoriesStore.getNestedCategories(),this.traverseTree()}},mounted(){this.value=this.selected},async beforeMount(){this.categoriesStore=r(),await this.categoriesStore.getAll(),this.buildCategories()},watch:{"categoriesStore.allEntries":{deep:!0,handler:function(){this.buildCategories()}}}},[["render",function(e,t,r,n,l,d){const h=o("MultiSelect");return l.areOptionsReady?(a(),i(h,{key:0,label:r.label,"selected-label-source":"selectedLabel",options:l.options,onChange:d.onOptionChanged,onSelect:d.onOptionChanged,onDeselect:d.onOptionChanged,onClear:d.onOptionChanged,onPaste:d.onOptionChanged,modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),mode:"single","allow-show-options-list":!0,"allow-create-options":!1,"can-clear":!1,required:r.required},null,8,["label","options","onChange","onSelect","onDeselect","onClear","onPaste","modelValue","required"])):s("",!0)}]]);export{n as C};
