import{_ as t,M as e,I as a,aW as o,B as l,r as n,o as s,e as r,f as i,t as m,h as u,aa as c,aY as d,Y as p,k as h}from"./index.db8bde11.js";import{B as b}from"./Base.b55dfd74.js";import{S as f,I as P,T as C,G as g}from"./GroupStore.2b314199.js";import{P as y}from"./PublicFolderService.9fc40093.js";import{S as v}from"./SimpleTable.f571356e.js";import{T as w}from"./TableActions.744b2f39.js";import{C as S}from"./ColorInfoBlock.507c298b.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.86dcbce2.js";import"./SymfonyFileRoutes.5d7880cf.js";import"./SearchInput.ef99a9ef.js";import"./ClipboardService.e68b9e1f.js";const T={class:"flex justify-center"},V={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},x={class:"text-lg"};var $=t({data:()=>({form:{name:null,imagePath:null}}),props:{header:{type:String,required:!1,default:""},id:{type:[Number,null],required:!1,default:null},imagePath:{type:[String,null],required:!1,default:null},name:{type:[String,null],required:!1,default:null}},components:{MediumButtonWithIcon:e,FormInput:a},methods:{clearForm(){this.form.name=null,this.form.imagePath=null},async onSubmit(){let t,e=new o(f.TYPES_BASE_URL,this.id,l,this.form);e.reload=!1,t=this.id?await this.$moduleCall.update(e):await this.$moduleCall.new(e),t.success&&(this.$emit("submit"),this.clearForm())}},async beforeMount(){this.form.name=this.name,this.form.imagePath=this.imagePath}},[["render",function(t,e,a,o,l,c){const d=n("FormInput"),p=n("MediumButtonWithIcon");return s(),r("div",T,[i("div",V,[i("h2",x,m(a.header),1),u(d,{type:"text",modelValue:l.form.name,"onUpdate:modelValue":e[0]||(e[0]=t=>l.form.name=t),"is-required":!0,label:t.$t("contacts.settings.tabs.contactType.form.name.label")},null,8,["modelValue","label"]),u(d,{type:"text",modelValue:l.form.imagePath,"onUpdate:modelValue":e[1]||(e[1]=t=>l.form.imagePath=t),"is-required":!0,label:t.$t("contacts.settings.tabs.contactType.form.imagePath.label")},null,8,["modelValue","label"]),u(p,{text:t.$t("contacts.settings.tabs.contactType.form.submitButton.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:c.onSubmit},null,8,["text","onButtonClick"])])])}]]),B=t({data(){return{allTypes:[],store:null,form:{name:"",imagePath:""},table:{headers:[{label:"id",dataValuePath:"id.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:"imagePath",dataValuePath:"imagePath.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("contacts.settings.tabs.contactType.table.headers.name"),dataValuePath:"name.value",dataIsComponentPath:"name.isComponent",dataComponentPropertiesPath:null},{label:this.$t("contacts.settings.tabs.contactType.table.headers.preview"),dataValuePath:"preview.value",dataIsComponentPath:"preview.isComponent",dataComponentPropertiesPath:"preview.componentProps"},{label:this.$t("contacts.settings.tabs.contactType.table.headers.actions"),dataValuePath:"actions.value",dataIsComponentPath:"actions.isComponent",dataComponentPropertiesPath:"actions.componentProps"}]}}},components:{SimpleTable:v,AddEditForm:$},computed:{tableData(){let t=[];for(let e of this.allTypes)t.push({values:{id:{value:e.id,isComponent:!1},name:{value:e.name,isComponent:!1},preview:{value:P,isComponent:!0,componentProps:{path:y.buildUrl(e.imagePath),width:"50px"}},imagePath:{value:y.buildUrl(e.imagePath),isComponent:!1},actions:{value:w,isComponent:!0,componentProps:{editActionForm:$,baseUrl:f.TYPES_BASE_URL,store:C}}}});return t}},async beforeMount(){this.store=C(),await this.store.getAll(),this.allTypes=this.store.allEntries},watch:{"store.allEntries":{deep:!0,handler:function(){this.allTypes=this.store.allEntries}}}},[["render",function(t,e,a,o,l,i){const m=n("SimpleTable"),d=n("AddEditForm");return s(),r(c,null,[u(m,{headers:l.table.headers,data:i.tableData},null,8,["headers","data"]),u(d,{header:t.$t("contacts.settings.tabs.contactType.form.header"),onSubmit:l.store.getAll},null,8,["header","onSubmit"])],64)}]]);const I={class:"flex justify-center"},E={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},F={class:"text-lg"};var A=t({data(){return{defaultColor:"#000000",form:{name:null,color:this.defaultColor}}},props:{header:{type:String,required:!1,default:""},id:{type:[Number,null],required:!1,default:null},color:{type:[String,null],required:!1,default:null},name:{type:[String,null],required:!1,default:null}},components:{MediumButtonWithIcon:e,FormInput:a},methods:{clearForm(){this.form.name=null,this.form.color=this.defaultColor},async onSubmit(){let t,e=new o(f.GROUPS_BASE_URL,this.id,l,this.form);e.reload=!1,t=this.id?await this.$moduleCall.update(e):await this.$moduleCall.new(e),t.success&&(this.$emit("submit"),this.clearForm())}},async beforeMount(){var t;this.form.name=this.name,this.form.color=null!=(t=this.color)?t:this.defaultColor}},[["render",function(t,e,a,o,l,c){const d=n("FormInput"),p=n("MediumButtonWithIcon");return s(),r("div",I,[i("div",E,[i("h2",F,m(a.header),1),u(d,{type:"text",modelValue:l.form.name,"onUpdate:modelValue":e[0]||(e[0]=t=>l.form.name=t),"is-required":!0,label:t.$t("contacts.settings.tabs.contactGroup.form.name.label")},null,8,["modelValue","label"]),u(d,{type:"color",modelValue:l.form.color,"onUpdate:modelValue":e[1]||(e[1]=t=>l.form.color=t),label:t.$t("contacts.settings.tabs.contactGroup.form.color.label")},null,8,["modelValue","label"]),u(p,{text:t.$t("contacts.settings.tabs.contactGroup.form.submitButton.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:c.onSubmit},null,8,["text","onButtonClick"])])])}]]),j=t({data(){return{store:null,groups:[],table:{headers:[{label:"id",dataValuePath:"id.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:"color",dataValuePath:"color.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("contacts.settings.tabs.contactGroup.table.headers.name"),dataValuePath:"name.value",dataIsComponentPath:"name.isComponent",dataComponentPropertiesPath:null},{label:this.$t("contacts.settings.tabs.contactGroup.table.headers.color"),dataValuePath:"colorDisplay.value",dataIsComponentPath:"colorDisplay.isComponent",dataComponentPropertiesPath:"colorDisplay.componentProps"},{label:this.$t("contacts.settings.tabs.contactGroup.table.headers.actions"),dataValuePath:"actions.value",dataIsComponentPath:"actions.isComponent",dataComponentPropertiesPath:"actions.componentProps"}]}}},components:{AddEditForm:A,SimpleTable:v},computed:{tableData(){let t=[];for(let e of this.groups)t.push({values:{id:{value:e.id,isComponent:!1},name:{value:e.name,isComponent:!1},color:{value:`#${e.color}`,isComponent:!1},colorDisplay:{value:S,isComponent:!0,componentProps:{colorHex:`#${e.color}`}},actions:{value:w,isComponent:!0,componentProps:{editActionForm:A,baseUrl:f.GROUPS_BASE_URL,store:g}}}});return t}},async beforeMount(){this.store=new g,await this.store.getAll(),this.groups=this.store.allEntries},watch:{"store.allEntries":{deep:!0,handler:function(){this.groups=this.store.allEntries}}}},[["render",function(t,e,a,o,l,i){const m=n("SimpleTable"),d=n("AddEditForm");return s(),r(c,null,[u(m,{headers:l.table.headers,data:i.tableData},null,8,["headers","data"]),u(d,{header:t.$t("contacts.settings.tabs.contactGroup.form.header"),onSubmit:l.store.getAll},null,8,["header","onSubmit"])],64)}]]),U=t({components:{Base:b,Tabs:d},methods:{buildTabsContent(){return[{tabName:this.$t("contacts.settings.tabs.contactType.label"),tabComponent:B,tabComponentProps:{}},{tabName:this.$t("contacts.settings.tabs.contactGroup.label"),tabComponent:j,tabComponentProps:{}}]}}},[["render",function(t,e,a,o,l,r){const i=n("Tabs"),m=n("Base");return s(),p(m,{"info-block-description":t.$t("contacts.settings.description")},{default:h((()=>[u(i,{"tabs-with-content":r.buildTabsContent()},null,8,["tabs-with-content"])])),_:1},8,["info-block-description"])}]]);export{U as default};
