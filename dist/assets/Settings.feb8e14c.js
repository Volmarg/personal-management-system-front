import{B as t}from"./Base.b0f5291c.js";import{_ as e,I as a,M as n,aY as l,B as s,r as o,o as r,e as i,f as m,t as u,h as d,$ as p,aG as c,aU as h,Y as b,ab as y,a_ as f,k as P}from"./index.fd0df9df.js";import{S as C}from"./SimpleTable.52319679.js";import{T as g,P as S}from"./PaymentTypeSelect.fca12e60.js";import{S as T}from"./SymfonyPaymentsRoutes.eeeba139.js";import{T as w}from"./TableActions.96160990.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.5f37d705.js";import"./SearchInput.b68237e1.js";import"./VuelidateHandler.0ca821ed.js";import"./ClipboardService.94d9fc56.js";const I={class:"flex justify-center"},E={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},M={class:"text-lg"};var v=e({data:()=>({form:{dayOfMonth:null,amount:null,description:null,typeId:null}}),props:{dayOfMonth:{type:[Number,null],required:!1,default:null},header:{type:[String,null],required:!1,default:null},typeId:{type:[Number,null],required:!1,default:null},id:{type:[Number,null],required:!1,default:null},description:{type:[String,null],required:!1,default:null},name:{type:[String,null],required:!1,default:null},amount:{type:[Number,null],required:!1,default:null}},components:{TypeSelect:g,FormInput:a,MediumButtonWithIcon:n},methods:{clearForm(){this.form.dayOfMonth=null,this.form.amount=null,this.form.description=null,this.form.typeId=null},async onSubmit(){let t,e=new l(T.SETTINGS_RECURRING_PAYMENT_BASE_URL,this.id,s,this.form);e.reload=!1,t=this.id?await this.$moduleCall.update(e):await this.$moduleCall.new(e),t.success&&(this.$emit("submit"),this.clearForm())}},beforeMount(){this.form.dayOfMonth=this.dayOfMonth,this.form.typeId=this.typeId,this.form.description=this.description,this.form.amount=this.amount}},[["render",function(t,e,a,n,l,s){const p=o("FormInput"),c=o("TypeSelect"),h=o("MediumButtonWithIcon");return r(),i("div",I,[m("div",E,[m("h2",M,u(a.header),1),d(p,{type:"number",modelValue:l.form.dayOfMonth,"onUpdate:modelValue":e[0]||(e[0]=t=>l.form.dayOfMonth=t),"is-required":!0,label:t.$t("payments.settings.tab.recurringPayments.table.newForm.dayOfMonth.label")},null,8,["modelValue","label"]),d(p,{type:"number",modelValue:l.form.amount,"onUpdate:modelValue":e[1]||(e[1]=t=>l.form.amount=t),"is-required":!0,label:t.$t("payments.settings.tab.recurringPayments.table.newForm.money.label")},null,8,["modelValue","label"]),d(p,{type:"text",modelValue:l.form.description,"onUpdate:modelValue":e[2]||(e[2]=t=>l.form.description=t),"is-required":!0,label:t.$t("payments.settings.tab.recurringPayments.table.newForm.description.label")},null,8,["modelValue","label"]),d(c,{modelValue:l.form.typeId,"onUpdate:modelValue":e[3]||(e[3]=t=>l.form.typeId=t)},null,8,["modelValue"]),d(h,{text:t.$t("payments.settings.tab.recurringPayments.table.newForm.submit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-5","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:s.onSubmit},null,8,["text","onButtonClick"])])])}]]);const x=p("paymentsSettingsRecurringPaymentState",{state:()=>({allEntries:[]}),actions:{async getAll(){this.allEntries=await(new c).getAll(T.SETTINGS_RECURRING_PAYMENT_BASE_URL)}}}),V={data(){return{store:null,allPayments:[],headers:[{label:"id",dataValuePath:"id.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:"typeId",dataValuePath:"typeId.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("payments.settings.tab.recurringPayments.table.header.dayOfMonth"),dataValuePath:"dayOfMonth.value",dataIsComponentPath:"dayOfMonth.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.settings.tab.recurringPayments.table.header.money"),dataValuePath:"amount.value",dataIsComponentPath:"amount.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.settings.tab.recurringPayments.table.header.description"),dataValuePath:"description.value",dataIsComponentPath:"description.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.settings.tab.recurringPayments.table.header.type"),dataValuePath:"type.value",dataIsComponentPath:"type.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.settings.tab.recurringPayments.table.header.actions"),dataValuePath:"actions.value",dataIsComponentPath:"actions.isComponent",dataComponentPropertiesPath:"actions.componentProps"}]}},components:{AddEditForm:v,NoResultsText:h,SimpleTable:C},computed:{usedTableData(){let t=[];for(let e of this.allPayments)t.push({values:{id:{value:e.id,isComponent:!1},typeId:{value:e.typeId,isComponent:!1},dayOfMonth:{value:e.dayOfMonth,isComponent:!1},amount:{value:e.amount,isComponent:!1},description:{value:e.description,isComponent:!1},type:{value:e.typeName,isComponent:!1},actions:{value:w,isComponent:!0,componentProps:{editActionForm:v,baseUrl:T.SETTINGS_RECURRING_PAYMENT_BASE_URL,store:x}}}});return t}},methods:{async refreshPageState(){await this.store.getAll(),this.allPayments=this.store.allEntries}},async beforeMount(){this.store=x(),this.refreshPageState()},watch:{"store.allEntries":{deep:!0,handler:function(){this.allPayments=this.store.allEntries}}}},$=m("hr",{class:"mt-5 mb-5"},null,-1);var N=e(V,[["render",function(t,e,a,n,l,s){const u=o("SimpleTable"),p=o("NoResultsText"),c=o("AddEditForm");return r(),i(y,null,[m("div",null,[s.usedTableData.length>0?(r(),b(u,{key:0,headers:l.headers,data:s.usedTableData,ref:"table",class:"mt-4"},null,8,["headers","data"])):(r(),b(p,{key:1}))]),$,d(c,{header:t.$t("payments.settings.tab.recurringPayments.table.newForm.header"),onSubmit:s.refreshPageState},null,8,["header","onSubmit"])],64)}]]);const _={class:"flex justify-center"},R={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},B={class:"text-lg"};var F=e({components:{FormInput:a,MediumButtonWithIcon:n},data:()=>({form:{name:null}}),props:{header:{type:String,required:!1,default:""},id:{type:[Number,null],required:!1,default:null},name:{type:[String,null],required:!1,default:null}},methods:{clearForm(){this.form.name=""},async onSubmit(){let t,e=new l(T.SETTINGS_PAYMENT_TYPE_BASE_URL,this.id,s,this.form);e.reload=!1,t=this.id?await this.$moduleCall.update(e):await this.$moduleCall.new(e),t.success&&(this.$emit("submit"),this.clearForm())}},beforeMount(){this.form.name=this.name}},[["render",function(t,e,a,n,l,s){const p=o("FormInput"),c=o("MediumButtonWithIcon");return r(),i("div",_,[m("div",R,[m("h2",B,u(a.header),1),d(p,{type:"text",modelValue:l.form.name,"onUpdate:modelValue":e[0]||(e[0]=t=>l.form.name=t),"is-required":!0,label:t.$t("payments.settings.tab.paymentTypes.table.newForm.typeName.label")},null,8,["modelValue","label"]),d(c,{text:t.$t("payments.settings.tab.paymentTypes.table.newForm.submit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-5","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:s.onSubmit},null,8,["text","onButtonClick"])])])}]]);const A={data(){return{store:null,allTypes:[],headers:[{label:"id",dataValuePath:"id.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("payments.settings.tab.paymentTypes.table.header.name"),dataValuePath:"name.value",dataIsComponentPath:"name.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.settings.tab.paymentTypes.table.header.actions"),dataValuePath:"actions.value",dataIsComponentPath:"actions.isComponent",dataComponentPropertiesPath:"actions.componentProps"}]}},components:{AddEditForm:F,NoResultsText:h,SimpleTable:C},computed:{usedTableData(){let t=[];for(let e of this.allTypes)t.push({values:{id:{value:e.id,isComponent:!1},name:{value:e.name,isComponent:!1},actions:{value:w,isComponent:!0,componentProps:{editActionForm:F,baseUrl:T.SETTINGS_PAYMENT_TYPE_BASE_URL,store:S}}}});return t}},methods:{async refreshPageState(){await this.store.getAll(),this.allTypes=this.store.allEntries}},async beforeMount(){this.store=S(),this.refreshPageState()},watch:{"store.allEntries":{deep:!0,handler:function(){this.allTypes=this.store.allEntries}}}},U=m("hr",{class:"mt-5 mb-5"},null,-1);var q=e(A,[["render",function(t,e,a,n,l,s){const u=o("SimpleTable"),p=o("NoResultsText"),c=o("AddEditForm");return r(),i(y,null,[m("div",null,[s.usedTableData.length>0?(r(),b(u,{key:0,headers:l.headers,data:s.usedTableData,ref:"table",class:"mt-4"},null,8,["headers","data"])):(r(),b(p,{key:1}))]),U,d(c,{header:t.$t("payments.settings.tab.paymentTypes.table.newForm.header"),onSubmit:s.refreshPageState},null,8,["header","onSubmit"])],64)}]]);const j={class:"flex justify-center"},k={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},O={class:"text-lg"};var G=e({data:()=>({form:{currencyMultiplier:null}}),components:{FormInput:a,MediumButtonWithIcon:n},methods:{async onSubmit(){let t,e=new l(T.SETTINGS_CURRENCY_MULTIPLIER_BASE_URL,this.id,s,this.form);e.reload=!1,t=await this.$moduleCall.update(e),t.success&&this.$emit("submit")}},async beforeMount(){let t=await this.$moduleCall.get(T.SETTINGS_CURRENCY_MULTIPLIER_BASE_URL);this.form.currencyMultiplier=t.value}},[["render",function(t,e,a,n,l,s){const p=o("FormInput"),c=o("MediumButtonWithIcon");return r(),i("div",j,[m("div",k,[m("h2",O,u(t.$t("payments.settings.tab.other.currencyMultiplier.form.header")),1),d(p,{type:"text",modelValue:l.form.currencyMultiplier,"onUpdate:modelValue":e[0]||(e[0]=t=>l.form.currencyMultiplier=t),"is-required":!0,label:t.$t("payments.settings.tab.other.currencyMultiplier.form.currencyMultiplier.label")},null,8,["modelValue","label"]),d(c,{text:t.$t("payments.settings.tab.other.currencyMultiplier.form.submit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-5","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:s.onSubmit},null,8,["text","onButtonClick"])])])}]]),L=e({components:{Tabs:f,Base:t},computed:{tabsContent(){return[{tabName:this.$t("payments.settings.tab.recurringPayments.header"),tabComponent:N},{tabName:this.$t("payments.settings.tab.paymentTypes.header"),tabComponent:q},{tabName:this.$t("payments.settings.tab.other.header"),tabComponent:G}]}}},[["render",function(t,e,a,n,l,s){const i=o("Tabs"),m=o("Base");return r(),b(m,{"info-block-description":t.$t("payments.settings.description"),"is-in-container":!1},{default:P((()=>[d(i,{"tabs-with-content":s.tabsContent},null,8,["tabs-with-content"])])),_:1},8,["info-block-description"])}]]);export{L as default};
