import{p as e}from"./PageStateStore.411599d5.js";import{_ as t,M as o,a0 as l,a1 as i,Q as s,r as a,o as n,e as d,h as r,k as c,Y as u,g as m,R as b,f as p,t as f,X as g,p as h,l as w,aa as M,af as k}from"./index.daf34ba3.js";import{C}from"./CreateUpdateForm.15e14225.js";import{F as x}from"./FloatingRoundedPlus.0fc55412.js";import{S as y}from"./CategoriesState.60c5580a.js";import"./CategorySelect.0649407f.js";import"./FloatingBox.0f7c8591.js";const v={data:()=>({initialSmallSizeModal:"medium",showModal:!1,isEdit:!1}),props:{note:{type:Object,required:!0},isModalVisible:{type:Boolean,required:!0,default:!1}},components:{MediumButtonWithIcon:o,CreateUpdateForm:C,Modal:l},mixins:[i,s],emits:["modalClosed","addNewClick","deleteClick","updateSubmit"],methods:{onModalClosed(){this.$emit("modalClosed")}},updated(){this.showModal=this.isModalVisible}},S=["innerHTML"],$={data:()=>({isPreviewModalVisible:!1}),props:{note:{type:Object,required:!0}},components:{PreviewNoteModal:t(v,[["render",function(e,t,o,l,i,s){const b=a("CreateUpdateForm"),p=a("MediumButtonWithIcon"),f=a("Modal");return n(),d("div",null,[r(f,{"is-visible":i.showModal,id:"note-preview",title:(i.isEdit?e.$t("notes.category.previewModal.header.editing.label"):"")+o.note.title,size:e.modalSize,"is-close-full-width":!0,"footer-classes":{"!flex-col":e.isTabletBreakingPoint},onModalClosed:s.onModalClosed},{content:c((()=>[i.isEdit?(n(),u(b,{key:1,"initial-body":o.note.body,"initial-category":o.note.categoryId,"initial-title":o.note.title,id:o.note.id,"is-edit":!0,"show-submit":!1,ref:"form"},null,8,["initial-body","initial-category","initial-title","id"])):(n(),d("div",{key:0,class:"note-body-preview",innerHTML:o.note.body},null,8,S))])),footerLeftSection:c((()=>[i.isEdit?(n(),u(p,{key:0,text:e.$t("notes.new.form.submit.label"),"margin-right-class-number":0,onButtonClick:t[0]||(t[0]=t=>{e.$refs.form.submit(),e.$emit("updateSubmit")}),"button-extra-classes":"pt-3 pb-3 md:pt-1 md:pb-1",class:"w-full md:w-auto","button-classes":"w-full md:w-auto mr-1","text-classes":"text-center w-full"},null,8,["text"])):m("",!0),i.isEdit?m("",!0):(n(),u(p,{key:1,text:e.$t("notes.category.previewModal.button.edit.label"),"margin-right-class-number":1,onButtonClick:t[1]||(t[1]=e=>i.isEdit=!0),"button-extra-classes":"pt-3 pb-3 md:pt-1 md:pb-1",class:"w-full md:w-auto ml-2","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full"},null,8,["text"])),i.isEdit?(n(),u(p,{key:2,text:e.$t("notes.category.previewModal.button.stopEditing.label"),"margin-right-class-number":1,onButtonClick:t[2]||(t[2]=e=>i.isEdit=!1),"button-extra-classes":"pt-3 pb-3 md:pt-1 md:pb-1",class:"w-full md:w-auto ml-2","button-classes":"w-full md:w-auto","text-classes":"text-center w-full"},null,8,["text"])):m("",!0),r(p,{text:e.$t("notes.category.previewModal.button.delete.label"),"margin-right-class-number":0,onButtonClick:t[3]||(t[3]=t=>e.$emit("deleteClick",{id:o.note.id})),"button-extra-classes":"pt-3 pb-3 md:pt-1 md:pb-1","background-color-class":"bg-red-500",class:"w-full md:w-auto","button-classes":"w-full md:w-auto mr-1","text-classes":"text-center w-full"},null,8,["text"])])),_:1},8,["is-visible","title","size","footer-classes","onModalClosed"])])}]]),MediumButtonWithIcon:o},emits:["updateSubmit","deleteClick","toggleLockClick"]},P={class:"flex flex-row"},B=(N=()=>p("div",{class:"flex-shrink"},null,-1),h("data-v-68ffbf68"),N=N(),w(),N),E={class:"flex-grow"},L={class:"lock-button-wrapper"};var N,T=t($,[["render",function(e,t,o,l,i,s){const m=a("fa"),h=a("MediumButtonWithIcon"),w=a("PreviewNoteModal"),M=b("tippy");return n(),d("div",P,[p("div",{class:"w-full flex items-center justify-start bg-white dark:bg-gray-800 text-blue-500 shadow p-4 cursor-pointer hover:opacity-70",onClick:t[0]||(t[0]=e=>i.isPreviewModalVisible=!0)},[B,p("div",E,f(o.note.title),1)]),p("div",L,[g((n(),u(h,{"margin-right-class-number":0,"top-wrapper-classes":{"w-full h-full":!0},"button-classes":"w-full h-full flex flex-col justify-center !border-r-0","background-color-class":o.note.isLocked?"bg-red-500":"bg-green-500",onButtonClick:t[1]||(t[1]=t=>e.$emit("toggleLockClick",{id:o.note.id}))},{icon:c((()=>[o.note.isLocked?(n(),u(m,{key:0,icon:"lock",class:"text-2md","is-margin-right":!1})):(n(),u(m,{key:1,icon:"lock-open",class:"text-2md","is-margin-right":!1}))])),_:1},8,["background-color-class"])),[[M,o.note.isLocked?e.$t("notes.category.text.unlock"):e.$t("notes.category.text.lock")]])]),r(w,{"is-modal-visible":i.isPreviewModalVisible,onModalClosed:t[2]||(t[2]=e=>i.isPreviewModalVisible=!1),note:o.note,onUpdateSubmit:t[3]||(t[3]=t=>e.$emit("updateSubmit")),onDeleteClick:t[4]||(t[4]=t=>e.$emit("deleteClick",t))},null,8,["is-modal-visible","note"])])}],["__scopeId","data-v-68ffbf68"]]);const _={data:()=>({initialSmallSizeModal:"full",showModal:!1}),props:{isModalVisible:{type:Boolean,required:!0,default:!1}},components:{MediumButtonWithIcon:o,CreateUpdateForm:C,Modal:l},mixins:[i],emits:["modalClosed"],methods:{onModalClosed(){this.$emit("modalClosed")}},updated(){this.showModal=this.isModalVisible}},R={class:"notes-wrapper"};var U=t({data:()=>({isAddNewModalVisible:!1,category:{},canRefresh:!0,notes:[]}),mixins:[{unmounted(){e().pageTitlePostfix=""}}],components:{NewNoteModal:t(_,[["render",function(e,t,o,l,i,s){const u=a("CreateUpdateForm"),m=a("MediumButtonWithIcon"),b=a("Modal");return n(),d("div",null,[r(b,{"is-visible":i.showModal,id:"note-create",title:e.$t("notes.common.createUpdateForm.header.create"),onModalClosed:s.onModalClosed,size:e.modalSize},{content:c((()=>[r(u,{"initial-category":e.$route.params.id,onSubmit:t[0]||(t[0]=t=>e.$emit("modalClosed")),ref:"form"},null,8,["initial-category"])])),footerLeftSection:c((()=>[r(m,{text:e.$t("notes.new.form.submit.label"),"margin-right-class-number":0,onButtonClick:t[1]||(t[1]=t=>{e.$refs.form.submit(),e.$emit("modalClosed")}),"button-extra-classes":"pt-3 pb-3 md:pt-1 md:pb-1",class:"w-full md:w-auto","button-classes":"w-full md:w-auto mr-1","text-classes":"text-center w-full"},null,8,["text"])])),_:1},8,["is-visible","title","onModalClosed","size"])])}]]),FloatingRoundedPlus:x,SingleNote:T},methods:{setPageTitleCategory(){e().pageTitlePostfix=this.category.name},async refreshPage(){this.canRefresh&&(this.canRefresh=!1,this.category=await this.$moduleCall.get(y.NOTES_CATEGORIES_BASE_URL,this.$route.params.id),this.notes=await this.$moduleCall.getAll(y.NOTES_BASE_URL,this.$route.params.id),this.setPageTitleCategory(),this.$nextTick((()=>{this.canRefresh=!0})))},onDelete(e){this.$moduleCall.remove(y.NOTES_BASE_URL,e.id,!1),this.refreshPage()},async onToggleLock(e){await this.$moduleCall.toggleLock(y.NOTES_BASE_URL,e.id),this.refreshPage()}},beforeMount(){this.refreshPage()},updated(){this.refreshPage()}},[["render",function(e,t,o,l,i,s){const c=a("SingleNote"),m=a("FloatingRoundedPlus"),f=a("NewNoteModal"),h=b("tippy");return n(),d(M,null,[p("div",R,[(n(!0),d(M,null,k(i.notes,(e=>(n(),u(c,{key:e.id,note:e,class:"single-note",onUpdateSubmit:s.refreshPage,onDeleteClick:s.onDelete,onToggleLockClick:s.onToggleLock},null,8,["note","onUpdateSubmit","onDeleteClick","onToggleLockClick"])))),128))]),g(r(m,{class:"mb-10",onClick:t[0]||(t[0]=e=>i.isAddNewModalVisible=!0)},null,512),[[h,e.$t("notes.category.text.addNew")]]),r(f,{"is-modal-visible":i.isAddNewModalVisible,onModalClosed:t[1]||(t[1]=e=>i.isAddNewModalVisible=!1)},null,8,["is-modal-visible"])],64)}],["__scopeId","data-v-e46fbf42"]]);export{U as default};
