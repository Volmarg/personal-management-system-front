import{T as e}from"./TableActions.96160990.js";import{S as t,_ as a,M as l,I as n,aY as o,B as s,r as i,o as r,e as m,f as p,t as d,h as u,$ as h,aG as f,Y as c,k as b}from"./index.fd0df9df.js";import{S as x}from"./SimpleTable.52319679.js";import{B as P}from"./Base.b0f5291c.js";import"./ClipboardService.94d9fc56.js";import"./SearchInput.b68237e1.js";import"./VuelidateHandler.0ca821ed.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.5f37d705.js";class C extends t{}C.PLANS_BASE_URL="/module/shopping/plans";const S={class:"flex justify-center"},g={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},v={class:"text-lg"};var w=a({data:()=>({form:{name:null,information:null,example:null}}),props:{header:{type:String,required:!1,default:""},id:{type:[Number,null],required:!1,default:null},name:{type:[String,null],required:!1,default:null},information:{type:[String,null],required:!1,default:null},example:{type:[String,null],required:!1,default:null}},components:{MediumButtonWithIcon:l,FormInput:n},methods:{clearForm(){this.form.name=null,this.form.information=null,this.form.example=null},async onSubmit(){let e,t=new o(C.PLANS_BASE_URL,this.id,s,this.form);t.reload=!1,e=this.id?await this.$moduleCall.update(t):await this.$moduleCall.new(t),e.success&&(this.$emit("submit"),this.clearForm())}},beforeMount(){this.form.name=this.name,this.form.information=this.information,this.form.example=this.example}},[["render",function(e,t,a,l,n,o){const s=i("FormInput"),h=i("MediumButtonWithIcon");return r(),m("div",S,[p("div",g,[p("h2",v,d(a.header),1),u(s,{type:"text",modelValue:n.form.name,"onUpdate:modelValue":t[0]||(t[0]=e=>n.form.name=e),"is-required":!0,label:e.$t("shopping.plans.form.name.label")},null,8,["modelValue","label"]),u(s,{type:"text",modelValue:n.form.information,"onUpdate:modelValue":t[1]||(t[1]=e=>n.form.information=e),"is-required":!0,label:e.$t("shopping.plans.form.information.label")},null,8,["modelValue","label"]),u(s,{type:"text",modelValue:n.form.example,"onUpdate:modelValue":t[2]||(t[2]=e=>n.form.example=e),label:e.$t("shopping.plans.form.example.label")},null,8,["modelValue","label"]),u(h,{text:e.$t("shopping.plans.form.submit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-6","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:o.onSubmit},null,8,["text","onButtonClick"])])])}]]);const A=h("shoppingPlansStore",{state:()=>({allEntries:[]}),actions:{async getAll(){this.allEntries=await(new f).getAll(C.PLANS_BASE_URL)}}});var B=a({data(){return{store:null,plans:[],table:{headers:[{label:"id",dataValuePath:"id.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("shopping.plans.table.headers.name.label"),dataValuePath:"name.value",dataIsComponentPath:"name.isComponent",dataComponentPropertiesPath:null},{label:this.$t("shopping.plans.table.headers.information.label"),dataValuePath:"information.value",dataIsComponentPath:"information.isComponent",dataComponentPropertiesPath:null},{label:this.$t("shopping.plans.table.headers.example.label"),dataValuePath:"example.value",dataIsComponentPath:"example.isComponent",dataComponentPropertiesPath:null},{label:this.$t("shopping.plans.table.headers.actions.label"),dataValuePath:"actions.value",dataIsComponentPath:"actions.isComponent",dataComponentPropertiesPath:"actions.componentProps"}]}}},components:{AddEditForm:w,SimpleTable:x,Base:P},computed:{tableData(){let t=[];for(let a of this.plans)t.push({values:{id:{value:a.id,isComponent:!1},information:{value:a.information,isComponent:!1},example:{value:a.example,isComponent:!1},name:{value:a.name,isComponent:!1},actions:{value:e,isComponent:!0,componentProps:{editActionForm:w,baseUrl:C.PLANS_BASE_URL,store:A}}}});return t}},async beforeMount(){this.store=A(),await this.store.getAll(),this.plans=this.store.allEntries},watch:{"store.allEntries":{deep:!0,handler:function(){this.plans=this.store.allEntries}}}},[["render",function(e,t,a,l,n,o){const s=i("SimpleTable"),m=i("AddEditForm"),p=i("Base");return r(),c(p,{"info-block-description":e.$t("shopping.plans.description")},{default:b((()=>[u(s,{headers:n.table.headers,data:o.tableData},null,8,["headers","data"]),u(m,{header:e.$t("shopping.plans.form.header"),onSubmit:n.store.getAll},null,8,["header","onSubmit"])])),_:1},8,["info-block-description"])}]]);export{B as default};
