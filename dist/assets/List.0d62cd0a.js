import{aE as e,aF as t,_ as o,aK as l,c as a,r as s,o as r,Y as n,M as i,I as d,aW as u,B as p,e as m,f as h,t as c,h as f,k as b}from"./index.96856189.js";import{S as w,G as g}from"./GroupsStore.b36fbddb.js";import{S as C}from"./SimpleTable.3c40fd1c.js";import{B as P}from"./Base.ed256b75.js";import{T as S}from"./TableActions.a663c780.js";import{P as V}from"./PasswordWithConfirmation.6124745f.js";import"./SearchInput.1906b730.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.0bd7bab9.js";import"./ClipboardService.8ea6182d.js";import"./index.esm.9fe9483d.js";const I=e("passwordsStore",{state:()=>({allEntries:[]}),actions:{async getAll(){this.allEntries=await(new t).getAll(w.PASSWORDS_BASE_URL)}}}),v={class:"flex justify-center"},y={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},$={class:"text-lg"};var B=o({data:()=>({form:{login:null,password:null,url:null,description:null,groupId:null}}),props:{header:{type:String,required:!1,default:""},id:{type:[Number,null],required:!1,default:null},login:{type:[String,null],required:!1,default:null},password:{type:[String,null],required:!1,default:null},url:{type:[String,null],required:!1,default:null},description:{type:[String,null],required:!1,default:null},groupId:{type:[Number,null],required:!1,default:null}},components:{GroupSelect:o({data:()=>({selectOptions:[],groups:[],store:null,selectedLimit:0}),components:{MultiSelect:l},computed:{options(){let e=[];for(let t of this.groups)e.push({label:a.ucFirst(t.name),value:t.id});return e}},methods:{onOptionChanged(e){this.selectedLimit=e,this.$emit("update:modelValue",e)}},async beforeMount(){this.store=g(),await this.store.getAll(),this.groups=this.store.allEntries},watch:{"store.allEntries":{deep:!0,handler:function(){this.groups=this.store.allEntries}}}},[["render",function(e,t,o,l,a,i){const d=s("MultiSelect");return r(),n(d,{label:e.$t("passwords.list.form.new.group.label"),options:i.options,onChange:i.onOptionChanged,onSelect:i.onOptionChanged,onDeselect:i.onOptionChanged,onClear:i.onOptionChanged,onPaste:i.onOptionChanged,modelValue:a.selectedLimit,"onUpdate:modelValue":t[0]||(t[0]=e=>a.selectedLimit=e),mode:"single","allow-show-options-list":!0,"allow-create-options":!1,"can-clear":!1,required:!0},null,8,["label","options","onChange","onSelect","onDeselect","onClear","onPaste","modelValue"])}]]),PasswordWithConfirmation:V,MediumButtonWithIcon:i,FormInput:d},methods:{clearForm(){this.form.login=null,this.form.url=null,this.form.description=null,this.form.groupId=null,this.$refs.passwordWithConfirmation.clear()},async onSubmit(){let e,t=new u(w.PASSWORDS_BASE_URL,this.id,p,this.form);t.reload=!1,e=this.id?await this.$moduleCall.update(t):await this.$moduleCall.new(t),e.success&&(this.$emit("submit"),this.clearForm())}},async beforeMount(){this.form.login=this.login,this.form.password=this.password,this.form.url=this.url,this.form.description=this.description,this.form.groupId=this.groupId}},[["render",function(e,t,o,l,a,n){const i=s("FormInput"),d=s("GroupSelect"),u=s("PasswordWithConfirmation"),p=s("MediumButtonWithIcon");return r(),m("div",v,[h("div",y,[h("h2",$,c(o.header),1),f(i,{type:"text",modelValue:a.form.login,"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.login=e),"is-required":!0,label:e.$t("passwords.list.form.new.login.label")},null,8,["modelValue","label"]),f(i,{type:"text",modelValue:a.form.url,"onUpdate:modelValue":t[1]||(t[1]=e=>a.form.url=e),label:e.$t("passwords.list.form.new.url.label")},null,8,["modelValue","label"]),f(i,{type:"text",modelValue:a.form.description,"onUpdate:modelValue":t[2]||(t[2]=e=>a.form.description=e),"is-required":!0,label:e.$t("passwords.list.form.new.description.label")},null,8,["modelValue","label"]),f(d,{modelValue:a.form.groupId,"onUpdate:modelValue":t[3]||(t[3]=e=>a.form.groupId=e),class:"mb-6"},null,8,["modelValue"]),f(u,{onBothPasswordsChanged:t[4]||(t[4]=e=>a.form.password=e),onPasswordChanged:t[5]||(t[5]=e=>a.form.password=e),modelValue:a.form.password,"onUpdate:modelValue":t[6]||(t[6]=e=>a.form.password=e),ref:"passwordWithConfirmation"},null,8,["modelValue"]),f(p,{text:e.$t("passwords.list.form.new.submitButton.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-6","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:n.onSubmit},null,8,["text","onButtonClick"])])])}]]),x=o({data(){return{store:null,passwords:[],table:{headers:[{label:"id",dataValuePath:"id.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:"groupId",dataValuePath:"groupId.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("passwords.list.table.headers.password.label"),dataValuePath:"password.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("passwords.list.table.headers.login.label"),dataValuePath:"login.value",dataIsComponentPath:"login.isComponent",dataComponentPropertiesPath:null},{label:this.$t("passwords.list.table.headers.url.label"),dataValuePath:"url.value",dataIsComponentPath:"url.isComponent",dataComponentPropertiesPath:null},{label:this.$t("passwords.list.table.headers.description.label"),dataValuePath:"description.value",dataIsComponentPath:"description.isComponent",dataComponentPropertiesPath:null},{label:this.$t("passwords.list.table.headers.group.label"),dataValuePath:"groupName.value",dataIsComponentPath:"groupName.isComponent",dataComponentPropertiesPath:null},{label:this.$t("passwords.list.table.headers.actions.label"),dataValuePath:"actions.value",dataIsComponentPath:"actions.isComponent",dataComponentPropertiesPath:"actions.componentProps"}]}}},components:{AddEditForm:B,SimpleTable:C,Base:P},computed:{tableData(){let e=[];for(let t of this.passwords)e.push({values:{id:{value:t.id,isComponent:!1},password:{value:t.password,isComponent:!1},login:{value:t.login,isComponent:!1},url:{value:t.url,isComponent:!1},description:{value:t.description,isComponent:!1},groupId:{value:t.groupId,isComponent:!1},groupName:{value:a.ucFirst(t.groupName),isComponent:!1},actions:{value:S,isComponent:!0,componentProps:{canCopyToClipboard:!0,copiedDataKey:"password",editActionForm:B,baseUrl:w.PASSWORDS_BASE_URL,store:I}}}});return e}},async beforeMount(){this.store=I(),await this.store.getAll(),this.passwords=this.store.allEntries},watch:{"store.allEntries":{deep:!0,handler:function(){this.passwords=this.store.allEntries}}}},[["render",function(e,t,o,l,a,i){const d=s("SimpleTable"),u=s("AddEditForm"),p=s("Base");return r(),n(p,{"info-block-description":e.$t("passwords.list.description")},{default:b((()=>[f(d,{headers:a.table.headers,data:i.tableData},null,8,["headers","data"]),f(u,{header:e.$t("passwords.list.form.header"),onSubmit:a.store.getAll},null,8,["header","onSubmit"])])),_:1},8,["info-block-description"])}]]);export{x as default};
