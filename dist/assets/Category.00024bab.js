import{p as e}from"./PageStateStore.16151d4f.js";import{_ as t,M as o,a0 as i,a1 as l,Q as s,r as a,o as d,e as n,h as r,k as c,Y as u,g as m,R as b,f as g,t as p,X as f,p as h,l as w,aa as M,af as k}from"./index.db8bde11.js";import{C}from"./CreateUpdateForm.09512275.js";import{F as y}from"./FloatingRoundedPlus.25f58d22.js";import{S as x}from"./CategoriesState.61218a0b.js";import"./CategorySelect.9b85be0e.js";import"./FloatingBox.d0c09d8b.js";const v={data:()=>({initialSmallSizeModal:"medium",showModal:!1,isEdit:!1}),props:{note:{type:Object,required:!0},isModalVisible:{type:Boolean,required:!0,default:!1}},components:{MediumButtonWithIcon:o,CreateUpdateForm:C,Modal:i},mixins:[l,s],emits:["modalClosed","addNewClick","deleteClick","updateSubmit"],methods:{onModalClosed(){this.$emit("modalClosed")}},updated(){this.showModal=this.isModalVisible}},S=["innerHTML"],$={data:()=>({isPreviewModalVisible:!1}),props:{note:{type:Object,required:!0}},components:{PreviewNoteModal:t(v,[["render",function(e,t,o,i,l,s){const b=a("CreateUpdateForm"),g=a("MediumButtonWithIcon"),p=a("Modal");return d(),n("div",null,[r(p,{"is-visible":l.showModal,title:(l.isEdit?e.$t("notes.category.previewModal.header.editing.label"):"")+o.note.title,size:e.modalSize,"is-close-full-width":!0,"footer-classes":{"!flex-col":e.isTabletBreakingPoint},onModalClosed:s.onModalClosed},{content:c((()=>[l.isEdit?(d(),u(b,{key:1,"initial-body":o.note.body,"initial-category":o.note.categoryId,"initial-title":o.note.title,id:o.note.id,"is-edit":!0,onSubmit:t[0]||(t[0]=t=>e.$emit("updateSubmit"))},null,8,["initial-body","initial-category","initial-title","id"])):(d(),n("div",{key:0,class:"note-body-preview",innerHTML:o.note.body},null,8,S))])),footerLeftSection:c((()=>[l.isEdit?m("",!0):(d(),u(g,{key:0,text:e.$t("notes.category.previewModal.button.edit.label"),"margin-right-class-number":1,onButtonClick:t[1]||(t[1]=e=>l.isEdit=!0),"button-extra-classes":"pt-3 pb-3 md:pt-1 md:pb-1",class:"w-full md:w-auto ml-2","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full"},null,8,["text"])),l.isEdit?(d(),u(g,{key:1,text:e.$t("notes.category.previewModal.button.stopEditing.label"),"margin-right-class-number":1,onButtonClick:t[2]||(t[2]=e=>l.isEdit=!1),"button-extra-classes":"pt-3 pb-3 md:pt-1 md:pb-1",class:"w-full md:w-auto ml-2","button-classes":"w-full md:w-auto","text-classes":"text-center w-full"},null,8,["text"])):m("",!0),r(g,{text:e.$t("notes.category.previewModal.button.delete.label"),"margin-right-class-number":0,onButtonClick:t[3]||(t[3]=t=>e.$emit("deleteClick",{id:o.note.id})),"button-extra-classes":"pt-3 pb-3 md:pt-1 md:pb-1","background-color-class":"bg-red-500",class:"w-full md:w-auto","button-classes":"w-full md:w-auto mr-1","text-classes":"text-center w-full"},null,8,["text"])])),_:1},8,["is-visible","title","size","footer-classes","onModalClosed"])])}]]),MediumButtonWithIcon:o},emits:["updateSubmit","deleteClick","toggleLockClick"]},P={class:"flex flex-row"},E=(T=()=>g("div",{class:"flex-shrink"},null,-1),h("data-v-68ffbf68"),T=T(),w(),T),N={class:"flex-grow"},L={class:"lock-button-wrapper"};var T,_=t($,[["render",function(e,t,o,i,l,s){const m=a("fa"),h=a("MediumButtonWithIcon"),w=a("PreviewNoteModal"),M=b("tippy");return d(),n("div",P,[g("div",{class:"w-full flex items-center justify-start bg-white dark:bg-gray-800 text-blue-500 shadow p-4 cursor-pointer hover:opacity-70",onClick:t[0]||(t[0]=e=>l.isPreviewModalVisible=!0)},[E,g("div",N,p(o.note.title),1)]),g("div",L,[f((d(),u(h,{"margin-right-class-number":0,"top-wrapper-classes":{"w-full h-full":!0},"button-classes":"w-full h-full flex flex-col justify-center !border-r-0","background-color-class":o.note.isLocked?"bg-red-500":"bg-green-500",onButtonClick:t[1]||(t[1]=t=>e.$emit("toggleLockClick",{id:o.note.id}))},{icon:c((()=>[o.note.isLocked?(d(),u(m,{key:0,icon:"lock",class:"text-2md","is-margin-right":!1})):(d(),u(m,{key:1,icon:"lock-open",class:"text-2md","is-margin-right":!1}))])),_:1},8,["background-color-class"])),[[M,o.note.isLocked?e.$t("notes.category.text.unlock"):e.$t("notes.category.text.lock")]])]),r(w,{"is-modal-visible":l.isPreviewModalVisible,onModalClosed:t[2]||(t[2]=e=>l.isPreviewModalVisible=!1),note:o.note,onUpdateSubmit:t[3]||(t[3]=t=>e.$emit("updateSubmit")),onDeleteClick:t[4]||(t[4]=t=>e.$emit("deleteClick",t))},null,8,["is-modal-visible","note"])])}],["__scopeId","data-v-68ffbf68"]]);const B={data:()=>({initialSmallSizeModal:"medium",showModal:!1}),props:{isModalVisible:{type:Boolean,required:!0,default:!1}},components:{CreateUpdateForm:C,Modal:i},mixins:[l],emits:["modalClosed"],methods:{onModalClosed(){this.$emit("modalClosed")}},updated(){this.showModal=this.isModalVisible}},R={class:"notes-wrapper"};var U=t({data:()=>({isAddNewModalVisible:!1,category:{},canRefresh:!0,notes:[]}),mixins:[{unmounted(){e().pageTitlePostfix=""}}],components:{NewNoteModal:t(B,[["render",function(e,t,o,i,l,s){const u=a("CreateUpdateForm"),m=a("Modal");return d(),n("div",null,[r(m,{"is-visible":l.showModal,title:e.$t("notes.common.createUpdateForm.header.create"),onModalClosed:s.onModalClosed,size:e.modalSize},{content:c((()=>[r(u,{"initial-category":e.$route.params.id,onSubmit:t[0]||(t[0]=t=>e.$emit("modalClosed"))},null,8,["initial-category"])])),_:1},8,["is-visible","title","onModalClosed","size"])])}]]),FloatingRoundedPlus:y,SingleNote:_},methods:{setPageTitleCategory(){e().pageTitlePostfix=this.category.name},async refreshPage(){this.canRefresh&&(this.canRefresh=!1,this.category=await this.$moduleCall.get(x.NOTES_CATEGORIES_BASE_URL,this.$route.params.id),this.notes=await this.$moduleCall.getAll(x.NOTES_BASE_URL,this.$route.params.id),this.setPageTitleCategory(),this.$nextTick((()=>{this.canRefresh=!0})))},onDelete(e){this.$moduleCall.remove(x.NOTES_BASE_URL,e.id,!1),this.refreshPage()},async onToggleLock(e){await this.$moduleCall.toggleLock(x.NOTES_BASE_URL,e.id),this.refreshPage()}},beforeMount(){this.refreshPage()},updated(){this.refreshPage()}},[["render",function(e,t,o,i,l,s){const c=a("SingleNote"),m=a("FloatingRoundedPlus"),p=a("NewNoteModal"),h=b("tippy");return d(),n(M,null,[g("div",R,[(d(!0),n(M,null,k(l.notes,(e=>(d(),u(c,{key:e.id,note:e,class:"single-note",onUpdateSubmit:s.refreshPage,onDeleteClick:s.onDelete,onToggleLockClick:s.onToggleLock},null,8,["note","onUpdateSubmit","onDeleteClick","onToggleLockClick"])))),128))]),f(r(m,{class:"mb-10",onClick:t[0]||(t[0]=e=>l.isAddNewModalVisible=!0)},null,512),[[h,e.$t("notes.category.text.addNew")]]),r(p,{"is-modal-visible":l.isAddNewModalVisible,onModalClosed:t[1]||(t[1]=e=>l.isAddNewModalVisible=!1)},null,8,["is-modal-visible"])],64)}],["__scopeId","data-v-e46fbf42"]]);export{U as default};
