import{T as e}from"./TableActions.e0d540a7.js";import{S as a,_ as t,M as l,I as n,aY as o,B as s,r as i,o as r,e as m,f as p,t as u,h as d,aF as h,aG as f,Y as c,k as b}from"./index.daf34ba3.js";import{S as x}from"./SimpleTable.7f9e58e8.js";import{B as P}from"./Base.336d6204.js";import"./ClipboardService.5a9eb047.js";import"./SearchInput.c3a307a8.js";import"./VuelidateHandler.c5fcca12.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.75dbc118.js";class C extends a{}C.PLANS_BASE_URL="/module/shopping/plans";const S={class:"flex justify-center"},g={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},v={class:"text-lg"};var w=t({data:()=>({form:{name:null,information:null,example:null}}),props:{header:{type:String,required:!1,default:""},id:{type:[Number,null],required:!1,default:null},name:{type:[String,null],required:!1,default:null},information:{type:[String,null],required:!1,default:null},example:{type:[String,null],required:!1,default:null}},components:{MediumButtonWithIcon:l,FormInput:n},methods:{clearForm(){this.form.name=null,this.form.information=null,this.form.example=null},async onSubmit(){let e,a=new o(C.PLANS_BASE_URL,this.id,s,this.form);a.reload=!1,e=this.id?await this.$moduleCall.update(a):await this.$moduleCall.new(a),e.success&&(this.$emit("submit"),this.clearForm())}},beforeMount(){this.form.name=this.name,this.form.information=this.information,this.form.example=this.example}},[["render",function(e,a,t,l,n,o){const s=i("FormInput"),h=i("MediumButtonWithIcon");return r(),m("div",S,[p("div",g,[p("h2",v,u(t.header),1),d(s,{type:"text",modelValue:n.form.name,"onUpdate:modelValue":a[0]||(a[0]=e=>n.form.name=e),"is-required":!0,label:e.$t("shopping.plans.form.name.label")},null,8,["modelValue","label"]),d(s,{type:"text",modelValue:n.form.information,"onUpdate:modelValue":a[1]||(a[1]=e=>n.form.information=e),"is-required":!0,label:e.$t("shopping.plans.form.information.label")},null,8,["modelValue","label"]),d(s,{type:"text",modelValue:n.form.example,"onUpdate:modelValue":a[2]||(a[2]=e=>n.form.example=e),label:e.$t("shopping.plans.form.example.label")},null,8,["modelValue","label"]),d(h,{text:e.$t("shopping.plans.form.submit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-6","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:o.onSubmit},null,8,["text","onButtonClick"])])])}]]);const A=h("shoppingPlansStore",{state:()=>({allEntries:[]}),actions:{async getAll(){this.allEntries=await(new f).getAll(C.PLANS_BASE_URL)}}});var B=t({data(){return{store:null,plans:[],table:{headers:[{label:"id",dataValuePath:"id.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("shopping.plans.table.headers.name.label"),dataValuePath:"name.value",dataIsComponentPath:"name.isComponent",dataComponentPropertiesPath:null},{label:this.$t("shopping.plans.table.headers.information.label"),dataValuePath:"information.value",dataIsComponentPath:"information.isComponent",dataComponentPropertiesPath:null},{label:this.$t("shopping.plans.table.headers.example.label"),dataValuePath:"example.value",dataIsComponentPath:"example.isComponent",dataComponentPropertiesPath:null},{label:this.$t("shopping.plans.table.headers.actions.label"),dataValuePath:"actions.value",dataIsComponentPath:"actions.isComponent",dataComponentPropertiesPath:"actions.componentProps"}]}}},components:{AddEditForm:w,SimpleTable:x,Base:P},computed:{tableData(){let a=[];for(let t of this.plans)a.push({values:{id:{value:t.id,isComponent:!1},information:{value:t.information,isComponent:!1},example:{value:t.example,isComponent:!1},name:{value:t.name,isComponent:!1},actions:{value:e,isComponent:!0,componentProps:{editActionForm:w,baseUrl:C.PLANS_BASE_URL,store:A}}}});return a}},async beforeMount(){this.store=A(),await this.store.getAll(),this.plans=this.store.allEntries},watch:{"store.allEntries":{deep:!0,handler:function(){this.plans=this.store.allEntries}}}},[["render",function(e,a,t,l,n,o){const s=i("SimpleTable"),m=i("AddEditForm"),p=i("Base");return r(),c(p,{"info-block-description":e.$t("shopping.plans.description")},{default:b((()=>[d(s,{headers:n.table.headers,data:o.tableData},null,8,["headers","data"]),d(m,{header:e.$t("shopping.plans.form.header"),onSubmit:n.store.getAll},null,8,["header","onSubmit"])])),_:1},8,["info-block-description"])}]]);export{B as default};
