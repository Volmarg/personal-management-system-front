import{S as e}from"./SimpleTable.52319679.js";import{C as a}from"./ColoredSwitch.35512540.js";import{_ as t,r as s,o,e as d,j as n,t as i,Y as l,g as r,af as m,f as p,aY as h,B as u}from"./index.fd0df9df.js";import"./SearchInput.b68237e1.js";import"./VuelidateHandler.0ca821ed.js";var g=t({props:{name:{type:String,required:!0},isLocked:{type:Boolean,required:!1,default:!1}}},[["render",function(e,a,t,m,p,h){const u=s("fa");return o(),d("p",null,[n(i(t.name)+" ",1),t.isLocked?(o(),l(u,{key:0,icon:"lock",class:"text-red-500 text-tiny"})):r("",!0)])}]]);const b={class:"mt-10"},c={class:"text-lg"};var C=t({data(){return{dashboardWidgetsTableId:"dashboardWidgets",widgets:[],headers:[{label:"id",isVisible:!1,dataValuePath:"id.value",dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("systemSettings.tab.dashboard.table.headers.name.label"),dataValuePath:"name.value",dataIsComponentPath:"name.isComponent",dataComponentPropertiesPath:"name.componentProps",dataComponentModelValuePath:"name.componentModelValue"},{label:this.$t("systemSettings.tab.dashboard.table.headers.displayWidget.label"),dataValuePath:"displayWidget.value",dataIsComponentPath:"displayWidget.isComponent",dataComponentPropertiesPath:"displayWidget.componentProps",dataComponentModelValuePath:"displayWidget.componentModelValue"}]}},components:{SimpleTable:e},mixins:[{data:()=>({widget:{schedules:"schedules",goalsProgress:"goalsProgress",goalsPayments:"goalsPayments",pendingIssues:"pendingIssues"}})}],computed:{data(){let e=[];for(let t of this.widgets)e.push({values:{id:{value:t.name,isComponent:!1,isVisible:!1},name:{value:g,isComponent:!0,componentProps:{name:this.$t("systemSettings.tab.dashboard.widgetToName."+t.name),isLocked:t.isModuleLocked}},displayWidget:{value:a,isComponent:!0,componentModelValue:t.enabled,componentProps:{}}}});return e}},methods:{onComponentValueChange(e){e.tableId==this.dashboardWidgetsTableId&&this.onWidgetVisibilityChange()},async onWidgetVisibilityChange(){let e=[];for(let s in this.$refs.table.data)e.push({name:this.$refs.table.data[s].values.id.value,enabled:this.$refs.table.$refs[`componentidx${s}2`][0].isActive});let a={widgets:e},t=new h(m.SETTINGS_DASHBOARD_WIDGET_VISIBILITY_BASE,null,u,a);t.reload=!1,await this.$moduleCall.update(t),this.fetchWidgets()},async fetchWidgets(){this.widgets=await this.$moduleCall.getAll(m.SETTINGS_DASHBOARD_WIDGET_VISIBILITY_BASE)}},beforeMount(){this.fetchWidgets()}},[["render",function(e,a,t,n,m,h){const u=s("SimpleTable");return o(),d("div",b,[p("h2",c,i(e.$t("systemSettings.tab.dashboard.widgetHeader")),1),h.data.length>0?(o(),l(u,{key:0,headers:m.headers,data:h.data,ref:"table",id:m.dashboardWidgetsTableId,onComponentValueChange:h.onComponentValueChange},null,8,["headers","data","id","onComponentValueChange"])):r("",!0)])}]]);export{C as default};
