import{_ as e,I as t,aV as a,M as l,aW as r,B as o,r as n,o as s,e as i,f as u,t as m,h as d,aS as c,Y as p,aE as h,aF as f,aI as b,k as P,aa as y}from"./index.31c62b28.js";import{S as C}from"./SymfonyPaymentsRoutes.2d8317d8.js";import{S as x}from"./SimpleTable.e8a83743.js";import{B as j}from"./Base.4cd7396b.js";import{T as w}from"./TableActions.891cb007.js";import"./SearchInput.7d75b069.js";import"./BrowserDetection.6a5570eb.js";import"./ColorBorderBar.d18aa733.js";import"./ClipboardService.126585e6.js";const S={data:()=>({form:{name:null,price:null,market:null,products:null,information:null,rejected:!1}}),props:{id:{type:[Number,null],required:!1,default:null},header:{type:String,required:!1,default:""},name:{type:[String,null],required:!1,default:null},market:{type:[String,null],required:!1,default:null},products:{type:[String,null],required:!1,default:null},information:{type:[String,null],required:!1,default:null},rejected:{type:Boolean,required:!1,default:!1},price:{type:[Number,null],required:!1,default:null},homeCurrencyPrice:{type:[Number,null],required:!1,default:null}},components:{FormInput:t,Checkbox:a,MediumButtonWithIcon:l},methods:{clearForm(){this.form.name=null,this.form.price=null,this.form.market=null,this.form.products=null,this.form.information=null,this.form.rejected=!1},async onSubmit(){let e,t=new r(C.PRODUCT_PRICES_BASE_URL,this.id,o,this.form);t.reload=!1,e=this.id?await this.$moduleCall.update(t):await this.$moduleCall.new(t),e.success&&(this.$emit("submit"),this.clearForm())}},beforeMount(){this.form.name=this.name,this.form.price=this.price,this.form.market=this.market,this.form.products=this.products,this.form.information=this.information,this.form.rejected=this.rejected}},k={class:"flex justify-center mt-10"},V={class:"mt-6 md:w-1/2 lg:w-1/3 w-full flex flex-col"},v={class:"text-lg"},$={class:"mb-4 flex flex-row hover:opacity-70 cursor-pointer"};var F=e(S,[["render",function(e,t,a,l,r,o){const c=n("FormInput"),p=n("Checkbox"),h=n("MediumButtonWithIcon");return s(),i("div",k,[u("div",V,[u("h2",v,m(a.header),1),d(c,{type:"text",modelValue:r.form.name,"onUpdate:modelValue":t[0]||(t[0]=e=>r.form.name=e),"is-required":!0,label:e.$t("payments.productPrices.newForm.name.label")},null,8,["modelValue","label"]),d(c,{type:"number",modelValue:r.form.price,"onUpdate:modelValue":t[1]||(t[1]=e=>r.form.price=e),"is-required":!0,label:e.$t("payments.productPrices.newForm.price.label")},null,8,["modelValue","label"]),d(c,{type:"text",modelValue:r.form.market,"onUpdate:modelValue":t[2]||(t[2]=e=>r.form.market=e),label:e.$t("payments.productPrices.newForm.market.label")},null,8,["modelValue","label"]),d(c,{type:"text",modelValue:r.form.products,"onUpdate:modelValue":t[3]||(t[3]=e=>r.form.products=e),label:e.$t("payments.productPrices.newForm.products.label")},null,8,["modelValue","label"]),d(c,{type:"text",modelValue:r.form.information,"onUpdate:modelValue":t[4]||(t[4]=e=>r.form.information=e),"is-required":!0,label:e.$t("payments.productPrices.newForm.information.label")},null,8,["modelValue","label"]),u("div",$,[d(p,{class:"transform scale-75",modelValue:r.form.rejected,"onUpdate:modelValue":t[5]||(t[5]=e=>r.form.rejected=e),ref:"checkbox"},null,8,["modelValue"]),u("label",{class:"checkbox checkbox-all align-self-center ml-1 cursor-pointer",onClick:t[6]||(t[6]=e=>this.$refs.checkbox.toggle())},m(e.$t("payments.productPrices.newForm.rejected.label")),1)]),d(h,{text:e.$t("payments.productPrices.newForm.submit.label"),"button-extra-classes":"pt-3 pb-3 sm:pt-1 sm:pb-1",class:"w-full mb-1 md:col-start-1 md:col-end-2 mt-6","button-classes":"w-full md:w-auto m-0-force","text-classes":"text-center w-full",onButtonClick:o.onSubmit},null,8,["text","onButtonClick"])])])}]]);const B={key:0},I={class:"flex flex-col justify-end"},g={class:"text-lg text-center md:text-right pr-0 md:pr-6 mb-1"},R={class:"flex flex-col md:flex-row justify-end"};var E=e({data(){return{rejectionFilter:null,headers:[{label:"id",dataValuePath:"id.value",isVisible:!1,dataIsComponentPath:null,dataComponentPropertiesPath:null},{label:this.$t("payments.productPrices.table.header.name.label"),dataValuePath:"name.value",dataIsComponentPath:"name.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.productPrices.table.header.market.label"),dataValuePath:"market.value",dataIsComponentPath:"market.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.productPrices.table.header.products.label"),dataValuePath:"products.value",dataIsComponentPath:"products.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.productPrices.table.header.information.label"),dataValuePath:"information.value",dataIsComponentPath:"information.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.productPrices.table.header.rejected.label"),dataValuePath:"rejected.value",dataRawValuePath:"rejected.rawValue",dataIsComponentPath:"rejected.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.productPrices.table.header.price.label"),dataValuePath:"price.value",dataIsComponentPath:"price.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.productPrices.table.header.homeCurrency.label"),dataValuePath:"homeCurrencyPrice.value",dataIsComponentPath:"homeCurrencyPrice.isComponent",dataComponentPropertiesPath:null},{label:this.$t("payments.productPrices.table.header.actions.label"),dataValuePath:"actions.value",dataIsComponentPath:"actions.isComponent",dataComponentPropertiesPath:"actions.componentProps"}]}},props:{data:{type:Array,required:!0}},components:{MediumButtonWithIcon:l,NoResultsText:c,SimpleTable:x},computed:{usedData(){let e=[];for(let t of this.data)(!0!==this.rejectionFilter&&!1!==this.rejectionFilter||t.values.rejected.rawValue===this.rejectionFilter)&&e.push(t);return e}},methods:{applyRejectionFilter(e){this.rejectionFilter=e,this.$refs.table.refresh()}}},[["render",function(e,t,a,l,r,o){const c=n("MediumButtonWithIcon"),h=n("SimpleTable"),f=n("NoResultsText");return a.data.length>0?(s(),i("div",B,[u("div",I,[u("div",null,[u("h2",g,m(e.$t("payments.productPrices.table.filter.header")),1)]),u("div",R,[d(c,{text:e.$t("payments.productPrices.table.filter.rejection.all"),onButtonClick:t[0]||(t[0]=e=>o.applyRejectionFilter(null)),"button-classes":"w-full md:w-auto flex justify-center md:block","text-classes":"text-center",class:"w-full md:w-auto mb-1 md:mb-0"},null,8,["text"]),d(c,{text:e.$t("payments.productPrices.table.filter.rejection.rejectedOnly"),onButtonClick:t[1]||(t[1]=e=>o.applyRejectionFilter(!0)),"button-classes":"w-full md:w-auto flex justify-center md:block","text-classes":"text-center",class:"w-full md:w-auto mb-1 md:mb-0"},null,8,["text"]),d(c,{text:e.$t("payments.productPrices.table.filter.rejection.acceptedOnly"),onButtonClick:t[2]||(t[2]=e=>o.applyRejectionFilter(!1)),"button-classes":"w-full md:w-auto flex justify-center md:block","text-classes":"text-center",class:"w-full md:w-auto mb-1 md:mb-0"},null,8,["text"])])]),d(h,{headers:r.headers,data:o.usedData,ref:"table",class:"mt-4"},null,8,["headers","data"])])):(s(),p(f,{key:1}))}]]);const T=h("paymentProductsState",{state:()=>({allEntries:[]}),actions:{async getAll(){this.allEntries=await(new f).getAll(C.PRODUCT_PRICES_BASE_URL)}}});var q=e({data:()=>({products:[],stateStore:null}),components:{AddEditForm:F,Container:b,Base:j,ProductsTable:E},computed:{usedTableData(){let e=[];for(let t of this.products)e.push({values:{id:{value:t.id,isComponent:!1},name:{value:t.name,isComponent:!1},market:{value:t.market,isComponent:!1},products:{value:t.products,isComponent:!1},information:{value:t.information,isComponent:!1},rejected:{value:this.$t(`generic.bool.yesNo.${Number(t.rejected)}`),rawValue:t.rejected,isComponent:!1},price:{value:t.price,isComponent:!1},homeCurrencyPrice:{value:t.homeCurrencyPrice,isComponent:!1},actions:{value:w,isComponent:!0,componentProps:{editActionForm:F,baseUrl:C.PRODUCT_PRICES_BASE_URL,store:T}}}});return e}},methods:{async refreshPageState(){await this.stateStore.getAll(),this.products=this.stateStore.allEntries}},beforeMount(){this.stateStore=T(),this.refreshPageState()},watch:{"stateStore.allEntries":{deep:!0,handler:function(){this.products=this.stateStore.allEntries}}}},[["render",function(e,t,a,l,r,o){const u=n("ProductsTable"),m=n("Base"),c=n("AddEditForm"),p=n("Container");return s(),i(y,null,[d(m,{"info-block-description":e.$t("payments.productPrices.description")},{default:P((()=>[d(u,{data:o.usedTableData},null,8,["data"])])),_:1},8,["info-block-description"]),d(p,null,{default:P((()=>[d(c,{onSubmit:o.refreshPageState,header:e.$t("payments.productPrices.table.header.header.new")},null,8,["onSubmit","header"])])),_:1})],64)}]]);export{q as default};
