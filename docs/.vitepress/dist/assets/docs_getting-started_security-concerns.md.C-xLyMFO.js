import{_ as s,c as t,o as a,a4 as n}from"./chunks/framework.D3NWZHxC.js";const k=JSON.parse('{"title":"Security concerns","description":"","frontmatter":{},"headers":[],"relativePath":"docs/getting-started/security-concerns.md","filePath":"docs/getting-started/security-concerns.md"}'),i={name:"docs/getting-started/security-concerns.md"};function o(p,e,l,c,r,d){return a(),t("div",null,e[0]||(e[0]=[n(`<h1 id="security-concerns" tabindex="-1">Security concerns <a class="header-anchor" href="#security-concerns" aria-label="Permalink to &quot;Security concerns&quot;">​</a></h1><h2 id="encryption-key" tabindex="-1">Encryption key <a class="header-anchor" href="#encryption-key" aria-label="Permalink to &quot;Encryption key&quot;">​</a></h2><p>In some cases project relies on <code>encryption key</code>.</p><p>The mentioned key is used to for example store encrypted entries of password module, which means that the entries in database are encrypted, and no password is stored as plain-text.</p><p>To make things easier, project is shipped with <strong>DEFAULT</strong> key, meaning that whoever decides to use the project will have the same key as other ppl.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>It&#39;s <strong>strongly</strong> advised to remove the default key, and restart the <code>pms-php-fpm</code> container afterward. There is a script which will automatically generate random key if none was found.</p><p>To remove the key:</p><ul><li>open the backend project, and open the file <code>config/packages/config/encryption.yaml</code>,</li><li>set this value</li></ul><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">parameters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    encrypt_key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span></code></pre></div></div><div class="danger custom-block"><p class="custom-block-title">DANGER</p><p>Make a backup of the key! Once it&#39;s lost You can no longer access any encrypted data.</p></div><h2 id="jwt-encryption-keys" tabindex="-1">JWT encryption keys <a class="header-anchor" href="#jwt-encryption-keys" aria-label="Permalink to &quot;JWT encryption keys&quot;">​</a></h2><p>Communication between frontend and backend happens with the use of JWT tokens.</p><p>Like before to make things easier, project is shipped with <strong>DEFAULT</strong> set of keys, meaning that whoever decides to use the project will have the same key as other ppl.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>It&#39;s rather recommended generate new set of keys and set them up both on <strong>backend</strong> and <strong>frontend</strong>. You&#39;d really need to be unlucky here for someone to reuse Your token, because the user email inside the token, would need to be exactly the same as the user that You use in Your project instance.</p><p>Follow the instruction below for more details.</p></div><h3 id="setting-up-new-jwt-keys" tabindex="-1">Setting up new JWT keys <a class="header-anchor" href="#setting-up-new-jwt-keys" aria-label="Permalink to &quot;Setting up new JWT keys&quot;">​</a></h3><ul><li>todo: remove</li><li>go inside the php container</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -it</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pms-php-fpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span></span></code></pre></div><ul><li>call this command</li></ul><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bin/console</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> lexik:jwt:generate-keypair</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --dry-run</span></span></code></pre></div><ul><li>copy this part</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>-----BEGIN ENCRYPTED PRIVATE KEY-----</span></span>
<span class="line"><span>MIIFHDBOBgkqhkiG9w0BBQ0wQTApBgkqhkiG9w0BBQwwHAQIuNN7CJs+HBkCAggA</span></span>
<span class="line"><span>&lt;rest&gt;</span></span>
<span class="line"><span>oxkSLY4ruQ2QPZeCt6hpjw==</span></span>
<span class="line"><span>-----END ENCRYPTED PRIVATE KEY-----</span></span></code></pre></div><ul><li>replace the content of <strong>backend</strong> project file <code>config/jwt/prod/private.pem</code></li><li>copy this part</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>-----BEGIN PUBLIC KEY-----</span></span>
<span class="line"><span>MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuJuTryRoj0bm286fyl7K</span></span>
<span class="line"><span>&lt;rest&gt;</span></span>
<span class="line"><span>bQIDAQAB</span></span>
<span class="line"><span>-----END PUBLIC KEY-----</span></span></code></pre></div><ul><li>replace the content of <strong>backend</strong> project file <code>config/jwt/prod/public.pem</code></li><li>replace the content of the <strong>frontend</strong> project file <code>src/config/prod/jwt.json</code></li><li>rebuild <strong>frontend</strong> assets,</li></ul><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Pay attention that the <strong>frontend</strong> key is stored as one-liner with special <code>new-line</code> character <code>\\n</code>. This format is important and must be kept!</p></div>`,22)]))}const u=s(i,[["render",o]]);export{k as __pageData,u as default};
