import{_ as d,C as n,c as h,o as c,j as e,a4 as o,a as l,G as s,w as i}from"./chunks/framework.D3NWZHxC.js";const F=JSON.parse('{"title":"Migrating from 1.x","description":"","frontmatter":{},"headers":[],"relativePath":"docs/getting-started/migrating-1-x.md","filePath":"docs/getting-started/migrating-1-x.md"}'),p={name:"docs/getting-started/migrating-1-x.md"},g={class:"danger custom-block"};function k(u,a,m,b,f,v){const t=n("PluginTabsTab"),r=n("PluginTabs");return c(),h("div",null,[a[3]||(a[3]=e("h1",{id:"migrating-from-1-x",tabindex:"-1"},[l("Migrating from 1.x "),e("a",{class:"header-anchor",href:"#migrating-from-1-x","aria-label":'Permalink to "Migrating from 1.x"'},"​")],-1)),a[4]||(a[4]=e("h2",{id:"caution",tabindex:"-1"},[l("Caution "),e("a",{class:"header-anchor",href:"#caution","aria-label":'Permalink to "Caution"'},"​")],-1)),e("div",g,[a[2]||(a[2]=o('<p class="custom-block-title">DANGER</p><p>Make a backup of the <code>database</code>, <code>storages</code>, and <code>configuration files</code> - <strong>You have been warned</strong>.</p><p>If You are going to use built-in commands, I <strong>strongly</strong> advice to double-check the exported file, or even additionally making the backup manually.</p><p><strong>Backup commands:</strong></p>',4)),s(r,null,{default:i(()=>[s(t,{label:"Database and Storage"},{default:i(()=>a[0]||(a[0]=[e("div",{class:"language-sh vp-adaptive-theme"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"sh"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"bin/console"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," cron:make-backup"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --help")])])])],-1)])),_:1}),s(t,{label:"Configs"},{default:i(()=>a[1]||(a[1]=[e("div",{class:"language-sh vp-adaptive-theme"},[e("button",{title:"Copy Code",class:"copy"}),e("span",{class:"lang"},"sh"),e("pre",{class:"shiki shiki-themes github-light github-dark vp-code",tabindex:"0"},[e("code",null,[e("span",{class:"line"},[e("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"bin/console"),e("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," cron:make-config-backup"),e("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --help")])])])],-1)])),_:1})]),_:1})]),a[5]||(a[5]=o(`<h2 id="general-information" tabindex="-1">General information <a class="header-anchor" href="#general-information" aria-label="Permalink to &quot;General information&quot;">​</a></h2><p>Versions <code>2.0.x</code> don&#39;t, and won&#39;t have any database related changes - this was planned for smooth transition.</p><p><strong>Database volume</strong></p><p>There are some changes in docker containers, and as the earlier mentioned database backup must be inserted into new volume.</p><p><strong>Storage config</strong></p><p>Storage related logic has changed as well, it&#39;s been tested only with default <code>.env</code> configuration, so You might need to change locations of Your storage files, or eventually try to symlink them.</p><p>It&#39;s about these <code>.env</code> keys:</p><div class="language-dotenv vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">dotenv</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">UPLOAD_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">IMAGES_UPLOAD_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">FILES_UPLOAD_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">VIDEOS_UPLOAD_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">MINIATURES_UPLOAD_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">PUBLIC_ROOT_DIR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span></code></pre></div><h2 id="moving-to-2-0-x" tabindex="-1">Moving to 2.0.x <a class="header-anchor" href="#moving-to-2-0-x" aria-label="Permalink to &quot;Moving to 2.0.x&quot;">​</a></h2><ul><li>update Your current project to the latest version - <code>1.4.65</code>,</li><li>clone both backend and frontend to some new directories,</li><li>start the containers,</li><li>check the backend <code>.env</code> and <code>docker-compose</code> configurations to access the database <ul><li>remove created database tables, and import Your backup,</li></ul></li><li>move backed-up storage files,</li><li>revert any necessary <code>.env</code> configuration,</li><li>revert Your encryption key in <code>config/packages/config/encryption.yaml</code></li></ul><h3 id="issues" tabindex="-1">Issues <a class="header-anchor" href="#issues" aria-label="Permalink to &quot;Issues&quot;">​</a></h3><p>It&#39;s impossible to automatically update all the files path used around modules, so You need to correct these manually.</p><p><strong>What does that mean?</strong></p><ul><li>let&#39;s say that You&#39;ve uploaded image via Storage,</li><li>then You created note with url (or direct path) to that image,</li><li>in such cases images/links will no longer work,</li></ul><p>That being said You need to update every single place where You&#39;ve inserted such links.</p>`,15))])}const x=d(p,[["render",k]]);export{F as __pageData,x as default};
